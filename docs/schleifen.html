<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Schleifen | Robustheit</title>
  <meta name="description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Schleifen | Robustheit" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Schleifen | Robustheit" />
  
  <meta name="twitter:description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  

<meta name="author" content="Max Brede und Johannes Andres" />


<meta name="date" content="2021-12-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="zufallswerte.html"/>
<link rel="next" href="listen.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Robustheit und Voraussetzungstests</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html"><i class="fa fa-check"></i>Lehrplan</a>
<ul>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#semesterplan"><i class="fa fa-check"></i>Semesterplan</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html"><i class="fa fa-check"></i>Programmieren in R</a></li>
<li class="chapter" data-level="" data-path="funktionen.html"><a href="funktionen.html"><i class="fa fa-check"></i>Funktionen</a>
<ul>
<li class="chapter" data-level="" data-path="funktionen.html"><a href="funktionen.html#geschachtelte-funktionen"><i class="fa fa-check"></i>Geschachtelte Funktionen</a></li>
<li class="chapter" data-level="" data-path="funktionen.html"><a href="funktionen.html#optionale-argumente"><i class="fa fa-check"></i>Optionale Argumente</a></li>
</ul></li>
<li><a href="if-statements.html#if-statements"><code>if</code>-Statements</a></li>
<li class="chapter" data-level="" data-path="zufallswerte.html"><a href="zufallswerte.html"><i class="fa fa-check"></i>Zufallswerte</a></li>
<li class="chapter" data-level="" data-path="schleifen.html"><a href="schleifen.html"><i class="fa fa-check"></i>Schleifen</a></li>
<li class="chapter" data-level="" data-path="listen.html"><a href="listen.html"><i class="fa fa-check"></i>Listen</a>
<ul>
<li class="chapter" data-level="" data-path="listen.html"><a href="listen.html#listen-und-datensätze"><i class="fa fa-check"></i>Listen und Datensätze</a></li>
<li class="chapter" data-level="" data-path="listen.html"><a href="listen.html#arbeiten-mit-listen"><i class="fa fa-check"></i>Arbeiten mit Listen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="attribute.html"><a href="attribute.html"><i class="fa fa-check"></i>Attribute</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i>Functionals</a>
<ul>
<li><a href="functionals.html#purrrmap"><code>purrr::map</code></a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#exkurs-iteratoren-vergleich-und-microbenchmarking"><i class="fa fa-check"></i>Exkurs: Iteratoren-Vergleich und Microbenchmarking</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#eigene-functionals"><i class="fa fa-check"></i>Eigene Functionals</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#argumente-durchreichen"><i class="fa fa-check"></i>Argumente durchreichen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="simulations-und-programmierübungen-in-r.html"><a href="simulations-und-programmierübungen-in-r.html"><i class="fa fa-check"></i>Simulations- und Programmierübungen in R</a>
<ul>
<li class="chapter" data-level="" data-path="simulations-und-programmierübungen-in-r.html"><a href="simulations-und-programmierübungen-in-r.html#pascalsches-dreieck"><i class="fa fa-check"></i>Pascalsches Dreieck</a></li>
<li><a href="simulations-und-programmierübungen-in-r.html#matrizen-und-chi2">Matrizen und <span class="math inline">\(\chi^2\)</span></a></li>
<li class="chapter" data-level="" data-path="simulations-und-programmierübungen-in-r.html"><a href="simulations-und-programmierübungen-in-r.html#t-test"><i class="fa fa-check"></i>t-Test</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="experimente-in-psychopy.html"><a href="experimente-in-psychopy.html"><i class="fa fa-check"></i>Experimente in Psychopy</a>
<ul>
<li class="chapter" data-level="" data-path="experimente-in-psychopy.html"><a href="experimente-in-psychopy.html#stroop"><i class="fa fa-check"></i>Stroop</a></li>
<li class="chapter" data-level="" data-path="experimente-in-psychopy.html"><a href="experimente-in-psychopy.html#stroop-mit-bildern"><i class="fa fa-check"></i>Stroop mit Bildern</a></li>
<li class="chapter" data-level="" data-path="experimente-in-psychopy.html"><a href="experimente-in-psychopy.html#einlesen-von-mit-psychopy-gewonnenen-daten"><i class="fa fa-check"></i>Einlesen von mit Psychopy gewonnenen Daten</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatur.html"><a href="literatur.html"><i class="fa fa-check"></i>Literatur</a></li>
<li class="divider"></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Robustheit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="schleifen" class="section level1">
<h1>Schleifen</h1>
<p>Bei so gut wie allen Simulationsproblemen stehen wir vor der Situation, dass wir eine Operation, zum Beispiel das Generieren einer gewissen Zahl an Zufallswerten und die Berechnung der zugehörigen Teststatistik, mehrere hundert Mal ausführen wollen.</p>
<p>Wir könnten jetzt die Operation mehrere hundert mal in unser Skript schreiben, damit würden wir aber zum Einen Fehler einladen, zum Anderen viel zu viel Lebenszeit verschwenden.</p>
<p>Deswegen gibt es in so gut wie jeder Programmiersprache irgendeine Form von Ausdrücken, die eine <em>iterative</em> Wiederholung eines Ausdrucks ermöglichen.</p>
<p>Ein Beispiel für die Anweisung einer solchen iterativen Wiederholung sind Schleifen.
In R gibt es davon drei Arten:</p>
<ul>
<li><p><code>repeat</code> - die flexibelste Schleife, die so lange wiederholt bis sie mit <code>break</code> unterbrochen wird</p></li>
<li><p><code>while</code> - eine Schleife, die zu Beginn jeder Wiederholung einen logischen Test durchführt und bei Zutreffen die Operation wiederholt</p></li>
<li><p><code>for</code> - die unflexibelste der drei Möglichkeiten. <code>for</code> iteriert einen Wert durch einen Vektor oder eine Liste, bis alle Einträge einmal dran waren. Das heißt, dass wir eine feste Laufzeit und damit den einfachsten Umgang haben, weswegen wir auch <code>for</code> in diesem Kurs verwenden werden.</p></li>
</ul>
<p>Die <code>for</code>-Syntax sieht dabei wie folgt aus:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="schleifen.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(value <span class="cf">in</span> vector){</span>
<span id="cb59-2"><a href="schleifen.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  do something</span>
<span id="cb59-3"><a href="schleifen.html#cb59-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Um jetzt Beispielsweise alle Werte von eins bis zehn durch zu laufen und jeden Wert auszugeben können wir den folgenden Ausdruck benutzen:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="schleifen.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="dv">10</span>)){</span>
<span id="cb60-2"><a href="schleifen.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb60-3"><a href="schleifen.html#cb60-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Wie man an diesem Beispiel schon sehen kann, können wir in der Schleife auf den <code>i</code>-Wert zugreifen. Das können wir zum Beispiel benutzen, um die ersten zehn Zahlen der Fibonacci-Reihe zu berechnen, in der jeder Wert die Summe der zwei vorhergegangenen ist:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="schleifen.html#cb62-1" aria-hidden="true" tabindex="-1"></a>fib <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">10</span>)</span>
<span id="cb62-2"><a href="schleifen.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(fib)){</span>
<span id="cb62-3"><a href="schleifen.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i<span class="sc">&lt;</span><span class="dv">3</span>){ <span class="co"># die ersten zwei Stellen müssen Einsen sein</span></span>
<span id="cb62-4"><a href="schleifen.html#cb62-4" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb62-5"><a href="schleifen.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb62-6"><a href="schleifen.html#cb62-6" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>] <span class="co"># nimm die letzten zwei Einträge und summier sie auf</span></span>
<span id="cb62-7"><a href="schleifen.html#cb62-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-8"><a href="schleifen.html#cb62-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-9"><a href="schleifen.html#cb62-9" aria-hidden="true" tabindex="-1"></a>fib</span></code></pre></div>
<pre><code>##  [1]  1  1  2  3  5  8 13 21 34 55</code></pre>
<p>In diesem Beispiel ist noch ein weiteres Programmier-Prinzip sichtbar, die <em>Allokation</em> des Ergebnis-Vektors vor der Berechnung der Werte. Damit ist einfach gemeint, dass wir den leeren <code>fib</code>-Vektor erstellt haben, bevor wir mit der Schleife angefangen haben.</p>
<p>Der Grund für dieses Vorgehen ist, dass jedes Anlegen eines Vektors einer bestimtmen Größe ein bisschen Rechenzeit kostet. Wenn wir von vornherein festlegen, wie lang der Vektor werden soll, müssen wir nur einen Vektor anlegen. Wenn wir stattdessen wie im folgenden Beispiel in jeder Iteration den Vektor vergrößern, erstellt R implizit in jeder Iteration einen neuen Vektor.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="schleifen.html#cb64-1" aria-hidden="true" tabindex="-1"></a>fib <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb64-2"><a href="schleifen.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="dv">10</span>)){</span>
<span id="cb64-3"><a href="schleifen.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i<span class="sc">&lt;</span><span class="dv">3</span>){ </span>
<span id="cb64-4"><a href="schleifen.html#cb64-4" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb64-5"><a href="schleifen.html#cb64-5" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb64-6"><a href="schleifen.html#cb64-6" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>] </span>
<span id="cb64-7"><a href="schleifen.html#cb64-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-8"><a href="schleifen.html#cb64-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-9"><a href="schleifen.html#cb64-9" aria-hidden="true" tabindex="-1"></a>fib</span></code></pre></div>
<pre><code>##  [1]  1  1  2  3  5  8 13 21 34 55</code></pre>
<p>Bei 10 Stellen ist der Unterschied noch nicht wirklich bemerkbar. Wenn wir jetzt aber das ganze in Funktionen verpacken und für längere Sequenzen laufen lassen und die Laufzeit stoppen sehen wir den Unterschied:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="schleifen.html#cb66-1" aria-hidden="true" tabindex="-1"></a>fib_alloc <span class="ot">&lt;-</span> <span class="cf">function</span>(n){</span>
<span id="cb66-2"><a href="schleifen.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  fib <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)</span>
<span id="cb66-3"><a href="schleifen.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(fib)){</span>
<span id="cb66-4"><a href="schleifen.html#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(i<span class="sc">&lt;</span><span class="dv">3</span>){ </span>
<span id="cb66-5"><a href="schleifen.html#cb66-5" aria-hidden="true" tabindex="-1"></a>      fib[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb66-6"><a href="schleifen.html#cb66-6" aria-hidden="true" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb66-7"><a href="schleifen.html#cb66-7" aria-hidden="true" tabindex="-1"></a>      fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>] </span>
<span id="cb66-8"><a href="schleifen.html#cb66-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb66-9"><a href="schleifen.html#cb66-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb66-10"><a href="schleifen.html#cb66-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(fib)</span>
<span id="cb66-11"><a href="schleifen.html#cb66-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb66-12"><a href="schleifen.html#cb66-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-13"><a href="schleifen.html#cb66-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-14"><a href="schleifen.html#cb66-14" aria-hidden="true" tabindex="-1"></a>fib_no_alloc <span class="ot">&lt;-</span> <span class="cf">function</span>(n){</span>
<span id="cb66-15"><a href="schleifen.html#cb66-15" aria-hidden="true" tabindex="-1"></a>  fib <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb66-16"><a href="schleifen.html#cb66-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(n)){</span>
<span id="cb66-17"><a href="schleifen.html#cb66-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(i<span class="sc">&lt;</span><span class="dv">3</span>){ </span>
<span id="cb66-18"><a href="schleifen.html#cb66-18" aria-hidden="true" tabindex="-1"></a>      fib[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb66-19"><a href="schleifen.html#cb66-19" aria-hidden="true" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb66-20"><a href="schleifen.html#cb66-20" aria-hidden="true" tabindex="-1"></a>      fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>] </span>
<span id="cb66-21"><a href="schleifen.html#cb66-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb66-22"><a href="schleifen.html#cb66-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb66-23"><a href="schleifen.html#cb66-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(fib)</span>
<span id="cb66-24"><a href="schleifen.html#cb66-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb66-25"><a href="schleifen.html#cb66-25" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb66-26"><a href="schleifen.html#cb66-26" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">fib_alloc</span>(<span class="dv">100000</span>)</span>
<span id="cb66-27"><a href="schleifen.html#cb66-27" aria-hidden="true" tabindex="-1"></a>runtime_alloc <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>() <span class="sc">-</span> start</span>
<span id="cb66-28"><a href="schleifen.html#cb66-28" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb66-29"><a href="schleifen.html#cb66-29" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">fib_no_alloc</span>(<span class="dv">100000</span>)</span>
<span id="cb66-30"><a href="schleifen.html#cb66-30" aria-hidden="true" tabindex="-1"></a>runtime_no_alloc <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>() <span class="sc">-</span> start</span>
<span id="cb66-31"><a href="schleifen.html#cb66-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-32"><a href="schleifen.html#cb66-32" aria-hidden="true" tabindex="-1"></a>runtime_alloc</span></code></pre></div>
<pre><code>## Time difference of 0.04131174 secs</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="schleifen.html#cb68-1" aria-hidden="true" tabindex="-1"></a>runtime_no_alloc</span></code></pre></div>
<pre><code>## Time difference of 0.06902266 secs</code></pre>
<p>Mehr als die Hälfte der Zeit geht für das Erstellen des neuen Vektors drauf!</p>
<div id="aufgabe-4" class="section level3">
<h3>Aufgabe</h3>
<p>In QM-2 habt Ihr im Rahmen des zentralen Grenzwertsatzes gelernt, dass die Verteilungsfunktion der z-Transformation der n-ten Summe einer Reihe von unabhängigen Zufallsvariablen für wachsendes n schwach gegen die Standardnormalverteilung konvergiert.</p>
<p>Schreibe eine Funktion, die für eine gegebene Anzahl an Summen und eine gegebene Verteilungsklasse (und den entsprechenden Parametern inklusive der Stichprobengröße) einen Vektor mit den entsprechenden Summen zurückgibt.
Nutze dafür deine Funktion aus der letzten Aufgabe.</p>
<p>Nutze diese Funktion dann um ein Histogramm mit 5000 dieser z-transformierten Summen zu erstellen.</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="schleifen.html#cb70-1" aria-hidden="true" tabindex="-1"></a>gen_central_lim_vec <span class="ot">&lt;-</span> <span class="cf">function</span>(N, </span>
<span id="cb70-2"><a href="schleifen.html#cb70-2" aria-hidden="true" tabindex="-1"></a>                                distribution,</span>
<span id="cb70-3"><a href="schleifen.html#cb70-3" aria-hidden="true" tabindex="-1"></a>                                n,</span>
<span id="cb70-4"><a href="schleifen.html#cb70-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">df =</span> <span class="dv">1</span>,</span>
<span id="cb70-5"><a href="schleifen.html#cb70-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">lambda =</span> <span class="dv">25</span>,</span>
<span id="cb70-6"><a href="schleifen.html#cb70-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">rate =</span> <span class="dv">5</span>) {</span>
<span id="cb70-7"><a href="schleifen.html#cb70-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-8"><a href="schleifen.html#cb70-8" aria-hidden="true" tabindex="-1"></a>  ret_vec <span class="ot">&lt;-</span> <span class="fu">numeric</span>(N)</span>
<span id="cb70-9"><a href="schleifen.html#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(N)){</span>
<span id="cb70-10"><a href="schleifen.html#cb70-10" aria-hidden="true" tabindex="-1"></a>    ret_vec[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">gen_distributed_values</span>(distribution,</span>
<span id="cb70-11"><a href="schleifen.html#cb70-11" aria-hidden="true" tabindex="-1"></a>                                      n,</span>
<span id="cb70-12"><a href="schleifen.html#cb70-12" aria-hidden="true" tabindex="-1"></a>                                      df,</span>
<span id="cb70-13"><a href="schleifen.html#cb70-13" aria-hidden="true" tabindex="-1"></a>                                      lambda,</span>
<span id="cb70-14"><a href="schleifen.html#cb70-14" aria-hidden="true" tabindex="-1"></a>                                      rate))</span>
<span id="cb70-15"><a href="schleifen.html#cb70-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb70-16"><a href="schleifen.html#cb70-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ret_vec)</span>
<span id="cb70-17"><a href="schleifen.html#cb70-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-18"><a href="schleifen.html#cb70-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-19"><a href="schleifen.html#cb70-19" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">sample =</span> <span class="fu">scale</span>(<span class="fu">gen_central_lim_vec</span>(<span class="dv">5000</span>, <span class="st">&#39;exp&#39;</span>, <span class="dv">1000</span>,<span class="at">rate =</span> <span class="dv">5</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb70-20"><a href="schleifen.html#cb70-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sample)) <span class="sc">+</span></span>
<span id="cb70-21"><a href="schleifen.html#cb70-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">1</span>,</span>
<span id="cb70-22"><a href="schleifen.html#cb70-22" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>,</span>
<span id="cb70-23"><a href="schleifen.html#cb70-23" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&#39;white&#39;</span>)</span></code></pre></div>
<img src="Robustheit_files/figure-html/unnamed-chunk-45-1.png" width="672" />
</details>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="zufallswerte.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="listen.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Robustheit.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
