<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Functionals | Robustheit</title>
  <meta name="description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Functionals | Robustheit" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Functionals | Robustheit" />
  
  <meta name="twitter:description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  

<meta name="author" content="Max Brede und Johannes Andres" />


<meta name="date" content="2021-12-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="attribute.html"/>
<link rel="next" href="simulations-und-programmierübungen-in-r.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Robustheit und Voraussetzungstests</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html"><i class="fa fa-check"></i>Lehrplan</a>
<ul>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#semesterplan"><i class="fa fa-check"></i>Semesterplan</a></li>
</ul></li>
<li class="part"><span><b>I Programmieren in R</b></span></li>
<li class="chapter" data-level="" data-path="funktionen.html"><a href="funktionen.html"><i class="fa fa-check"></i>Funktionen</a>
<ul>
<li class="chapter" data-level="" data-path="funktionen.html"><a href="funktionen.html#geschachtelte-funktionen"><i class="fa fa-check"></i>Geschachtelte Funktionen</a></li>
<li class="chapter" data-level="" data-path="funktionen.html"><a href="funktionen.html#optionale-argumente"><i class="fa fa-check"></i>Optionale Argumente</a></li>
</ul></li>
<li><a href="if-statements.html#if-statements"><code>if</code>-Statements</a></li>
<li class="chapter" data-level="" data-path="zufallswerte.html"><a href="zufallswerte.html"><i class="fa fa-check"></i>Zufallswerte</a></li>
<li class="chapter" data-level="" data-path="schleifen.html"><a href="schleifen.html"><i class="fa fa-check"></i>Schleifen</a></li>
<li class="chapter" data-level="" data-path="listen.html"><a href="listen.html"><i class="fa fa-check"></i>Listen</a>
<ul>
<li class="chapter" data-level="" data-path="listen.html"><a href="listen.html#listen-und-datensätze"><i class="fa fa-check"></i>Listen und Datensätze</a></li>
<li class="chapter" data-level="" data-path="listen.html"><a href="listen.html#arbeiten-mit-listen"><i class="fa fa-check"></i>Arbeiten mit Listen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="attribute.html"><a href="attribute.html"><i class="fa fa-check"></i>Attribute</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i>Functionals</a>
<ul>
<li><a href="functionals.html#purrrmap"><code>purrr::map</code></a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#exkurs-iteratoren-vergleich-und-microbenchmarking"><i class="fa fa-check"></i>Exkurs: Iteratoren-Vergleich und Microbenchmarking</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#eigene-functionals"><i class="fa fa-check"></i>Eigene Functionals</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#argumente-durchreichen"><i class="fa fa-check"></i>Argumente durchreichen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="simulations-und-programmierübungen-in-r.html"><a href="simulations-und-programmierübungen-in-r.html"><i class="fa fa-check"></i>Simulations- und Programmierübungen in R</a>
<ul>
<li class="chapter" data-level="" data-path="simulations-und-programmierübungen-in-r.html"><a href="simulations-und-programmierübungen-in-r.html#pascalsches-dreieck"><i class="fa fa-check"></i>Pascalsches Dreieck</a></li>
<li><a href="simulations-und-programmierübungen-in-r.html#matrizen-und-chi2">Matrizen und <span class="math inline">\(\chi^2\)</span></a></li>
<li class="chapter" data-level="" data-path="simulations-und-programmierübungen-in-r.html"><a href="simulations-und-programmierübungen-in-r.html#t-test"><i class="fa fa-check"></i>t-Test</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatur.html"><a href="literatur.html"><i class="fa fa-check"></i>Literatur</a></li>
<li class="divider"></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Robustheit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functionals" class="section level1">
<h1>Functionals</h1>
<p>Wie wir am Anfang des Semesters bei der Definition unserer eigenen Funktionen ja schon gemerkt haben, sind Funktionen in R von der Struktur her gar nicht so verschieden zu anderen Objekten wie zum Beispiel Datensätzen oder Vektoren.</p>
<p>Sowohl die einen, wie auch die anderen, werden als Namen mit entsprechenden Inhalten im Environment angelegt, wobei aber natürlich bei Datensätzen die Daten damit gemeint sind und bei Funktionen <em>Environment</em>-Verweis, <em>Body</em> und <em>Formals</em> angelegt werden.</p>
<p>Das heißt für R aber auch, dass so genannte <em>Functionals</em> genutzt werden. Diese Gruppe von Funktionen sind solche, die andere Funktionen als Argumente und diese anwenden können. Beispiele für solche Funktionen haben wir auch schon kennen gelernt, die vielleicht aus dem Kapitel zur <a href="https://mbrede.github.io/CAU_Kiel_EDVI/aggregation-und-filemanagement.html">Aggregation</a> von Daten in EDV1 bekannte <code>across</code>-Funktion ist ein solcher Fall:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="functionals.html#cb166-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb166-2"><a href="functionals.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb166-3"><a href="functionals.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),</span>
<span id="cb166-4"><a href="functionals.html#cb166-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="fu">list</span>(<span class="at">m =</span> mean, <span class="at">s =</span> sd),</span>
<span id="cb166-5"><a href="functionals.html#cb166-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.names =</span> <span class="st">&#39;{.fn}_{.col}&#39;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 9
##   Species    m_Sepal.Length s_Sepal.Length m_Sepal.Width s_Sepal.Width
##   &lt;fct&gt;               &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
## 1 setosa               5.01          0.352          3.43         0.379
## 2 versicolor           5.94          0.516          2.77         0.314
## 3 virginica            6.59          0.636          2.97         0.322
## # … with 4 more variables: m_Petal.Length &lt;dbl&gt;, s_Petal.Length &lt;dbl&gt;,
## #   m_Petal.Width &lt;dbl&gt;, s_Petal.Width &lt;dbl&gt;</code></pre>
<p>Hier übergeben wir dem <code>.fns</code>-Argument eine Liste mit Funktionen, die dann auf alle numerischen Spalten des Datensatzes angewandt werden.</p>
<p>Ein anderes, sehr für R typisches Beispiel von Functionals sind <code>sapply</code>, <code>lapply</code> und <code>mapply</code>. Alle drei Funktionen nehmen als Input eins oder mehrere Objekte und eine Funktion, die auf jeden Eintrag de(s/r) übergebenen Objekte(s) angewandt werden soll.</p>
<p>Exemplarisch gucken wir uns <code>sapply</code> an, die Listen<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> als erstes Argument erwarten.
Als Objekt nehmen wir <code>iris</code> (was ja wie wir gelernt habe eine aufgemotzte Liste ist) und lassen uns mit <code>sapply</code> für jede Spalte sagen, ob sie numerisch ist:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="functionals.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(iris, is.numeric)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
##         TRUE         TRUE         TRUE         TRUE        FALSE</code></pre>
<p>Fällt Dir was auf?
Wir haben gerade eine Funktion fünf mal ausgeführt, ohne ihr explizit ein Argument zu übergeben. Den (<code>is.numeric(iris$Sepal.Width)</code>,<code>is.numeric(iris$Sepal.Length)</code>, etc., etc., …)-Teil hat uns <code>sapply</code> abgenommen. <code>sapply</code> ist sogar so weit gegangen, uns die Ergebnisse in einem praktischen Vektor wiederzugeben, hat also irgendwie einen Output für uns erstellt.</p>
<p>Diesen Vektor könnten wir jetzt als Index nutzen, um uns nur die numerischen Spalten ausgeben zu lassen und uns wieder mit <code>sapply</code> die Mittelwerte ausrechnen zu lassen:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="functionals.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(iris[,<span class="fu">which</span>(<span class="fu">sapply</span>(iris, is.numeric))],</span>
<span id="cb170-2"><a href="functionals.html#cb170-2" aria-hidden="true" tabindex="-1"></a>       mean)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##     5.843333     3.057333     3.758000     1.199333</code></pre>
<p>Die <code>sapply</code>-Funktion macht also im Prinzip nicht viel anderes, als unsere <code>for</code>-Schleifen.</p>
<div id="aufgabe-9" class="section level3">
<h3>Aufgabe</h3>
<p>Baue die oben mit <code>sapply</code> implementierte Mittlung mit <code>for</code>-Schleifen nach.
Dabei soll erst überprüft werden, ob eine Spalte numerische Inhalte hat, wenn dem so ist soll der Mittelwert dieser Spalte berechnet werden.
Verpacke deine Lösung in eine Funktion, die den spaltenweisen Mittelwert zurückgibt.</p>
<p>Überlege dir insbesondere, ob Du den Output-Vektor allozieren kannst und was ein sinnvolles Format dafür wäre.</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="functionals.html#cb172-1" aria-hidden="true" tabindex="-1"></a>my_col_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb172-2"><a href="functionals.html#cb172-2" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">ncol</span>(df))</span>
<span id="cb172-3"><a href="functionals.html#cb172-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(out) <span class="ot">&lt;-</span> <span class="fu">names</span>(df)</span>
<span id="cb172-4"><a href="functionals.html#cb172-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(col <span class="cf">in</span> <span class="fu">names</span>(df)){</span>
<span id="cb172-5"><a href="functionals.html#cb172-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.numeric</span>(df[[col]])){</span>
<span id="cb172-6"><a href="functionals.html#cb172-6" aria-hidden="true" tabindex="-1"></a>      out[col] <span class="ot">&lt;-</span> <span class="fu">mean</span>(df[[col]])</span>
<span id="cb172-7"><a href="functionals.html#cb172-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb172-8"><a href="functionals.html#cb172-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb172-9"><a href="functionals.html#cb172-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(out)</span>
<span id="cb172-10"><a href="functionals.html#cb172-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb172-11"><a href="functionals.html#cb172-11" aria-hidden="true" tabindex="-1"></a><span class="fu">my_col_mean</span>(iris)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
##     5.843333     3.057333     3.758000     1.199333           NA</code></pre>
</details>
</div>
<div id="purrrmap" class="section level2">
<h2><code>purrr::map</code></h2>
<p>Eine Alternative zu den <code>*apply</code>-Funktionen ist die <code>map</code>-Familie aus dem <code>purrr</code>-Paket. Im Prinzip sind die identisch zu den <code>*apply</code>-Funktionen, der große Unterschied ist, dass sie spezialisierter sind als erstere.</p>
<p>Diese Eigenschaft ist auch der einzige wirkliche Grund dafür, die functional-Iteratoren den Schleifen vorzuziehen. Code, der so spezifisch für ein Problem wie möglich ist, ist einfach schöner weil schneller verständlich.</p>
<p>Die grundlegende Funktion aus der <code>map</code>-Familie ist das einfache <code>map</code>, das <code>lapply</code>-Analogon. <code>map</code> nimmt also eine Liste oder einen Vektor und eine Funktion als Input und gibt eine Liste zurück:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="functionals.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, sqrt)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 1.414214
## 
## [[3]]
## [1] 1.732051
## 
## [[4]]
## [1] 2
## 
## [[5]]
## [1] 2.236068
## 
## [[6]]
## [1] 2.44949
## 
## [[7]]
## [1] 2.645751
## 
## [[8]]
## [1] 2.828427
## 
## [[9]]
## [1] 3
## 
## [[10]]
## [1] 3.162278</code></pre>
<p>Alternativ kann mit der sogenannten Funktionsschreibweise auch ein Ausdruck formuliert werden, der für jeden iterierten Wert ausgeführt werden soll:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="functionals.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="sc">~</span><span class="fu">sqrt</span>(.))</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 1.414214
## 
## [[3]]
## [1] 1.732051
## 
## [[4]]
## [1] 2
## 
## [[5]]
## [1] 2.236068
## 
## [[6]]
## [1] 2.44949
## 
## [[7]]
## [1] 2.645751
## 
## [[8]]
## [1] 2.828427
## 
## [[9]]
## [1] 3
## 
## [[10]]
## [1] 3.162278</code></pre>
<p>Der besondere Vorteil dieser Funktionen gegenüber den <code>*apply</code>-Funktionen, ist dass diese Gruppe von Funktionen ermöglicht, den erwarteten Output einer Iteration klar lesbar zu definieren.</p>
<p>Beispielsweise kann mit <code>map_dbl</code>, <code>map_lgl</code> und <code>map_chr</code> klar festgelegt werden, dass 1. ein <code>atomic</code>-Vektor ausgegeben wird, der 2. einen klaren Datentyp hat:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="functionals.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="sc">~</span>.<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="functionals.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_lgl</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="sc">~</span>.<span class="sc">%%</span><span class="dv">2</span><span class="sc">==</span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>##  [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="functionals.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_chr</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="sc">~</span>letters[.])</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot;</code></pre>
<p>Und, noch praktischer, auch für komplexere Datentypen gibt es Wrapper. So können wir zum Beispiel mit <code>map_dfr</code> und <code>map_dfc</code> <code>tibble</code>s erzeugen lassen, die dann aus zeilenweise (<code>df</code><em><code>r</code></em> für rows) und spaltenweise (<code>df</code><em><code>c</code></em> für columns) zusammengefügten Ergebnissen bestehen:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="functionals.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dfr</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="sc">~</span><span class="fu">tibble</span>(<span class="at">i =</span> .,</span>
<span id="cb184-2"><a href="functionals.html#cb184-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">x =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">1</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 10 × 2
##        i     x
##    &lt;int&gt; &lt;int&gt;
##  1     1    10
##  2     2     7
##  3     3     3
##  4     4     5
##  5     5     3
##  6     6     7
##  7     7     5
##  8     8    10
##  9     9     1
## 10    10     3</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="functionals.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dfc</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="sc">~</span><span class="fu">c</span>(<span class="fu">sample</span>(.<span class="sc">:</span>(.<span class="sc">+</span><span class="dv">10</span>),<span class="dv">1</span>)))</span></code></pre></div>
<pre><code>## New names:
## * NA -&gt; ...1
## * NA -&gt; ...2
## * NA -&gt; ...3
## * NA -&gt; ...4
## * NA -&gt; ...5
## * ...</code></pre>
<pre><code>## # A tibble: 1 × 10
##    ...1  ...2  ...3  ...4  ...5  ...6  ...7  ...8  ...9 ...10
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1     5     8     3     4    15     9    11    15    13    10</code></pre>
</div>
<div id="exkurs-iteratoren-vergleich-und-microbenchmarking" class="section level2">
<h2>Exkurs: Iteratoren-Vergleich und Microbenchmarking</h2>
<p>Man liest manchmal, dass loops in R wegen geringerer Geschwindigkeit in jedem Fall vermieden werden sollten. Das stimmt aber nicht wirklich, wenn man für seine <code>for</code>-Schleifen alloziert.</p>
<p>Um das zu zeigen vergleichen wir mit der folgenden Funktion <code>for</code> ohne Allokation, for mit Allokation, <code>sapply</code> und <code>map_dbl</code>. Um die Laufzeiten zu vergleichen, nutzen wir die <code>bench::mark</code>- und <code>bench::press</code>-Funktion, sehr akkurate Funktion um Microbenchmarking durchzuführen.
Microbenchmarking heißt hier nichts anders, als dass wir die möglichen Implementationen alle unter denselben Bedingungen sehr oft ausführen und die Ausführungszeiten notieren, um eine Idee von der Effizienz dieser zu erlangen.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="functionals.html#cb189-1" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x) x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb189-2"><a href="functionals.html#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="functionals.html#cb189-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-4"><a href="functionals.html#cb189-4" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> bench<span class="sc">::</span><span class="fu">press</span>(<span class="at">n =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb189-5"><a href="functionals.html#cb189-5" aria-hidden="true" tabindex="-1"></a>                        {</span>
<span id="cb189-6"><a href="functionals.html#cb189-6" aria-hidden="true" tabindex="-1"></a>                          to_do <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">^</span> n</span>
<span id="cb189-7"><a href="functionals.html#cb189-7" aria-hidden="true" tabindex="-1"></a>                          bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb189-8"><a href="functionals.html#cb189-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">min_iterations =</span> <span class="dv">100</span>,</span>
<span id="cb189-9"><a href="functionals.html#cb189-9" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb189-10"><a href="functionals.html#cb189-10" aria-hidden="true" tabindex="-1"></a>                            <span class="at">for_no_alloc =</span> {</span>
<span id="cb189-11"><a href="functionals.html#cb189-11" aria-hidden="true" tabindex="-1"></a>                              res <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb189-12"><a href="functionals.html#cb189-12" aria-hidden="true" tabindex="-1"></a>                              <span class="cf">for</span> (j <span class="cf">in</span> to_do) {</span>
<span id="cb189-13"><a href="functionals.html#cb189-13" aria-hidden="true" tabindex="-1"></a>                                res <span class="ot">&lt;-</span> <span class="fu">c</span>(res, <span class="fu">my_function</span>(j))</span>
<span id="cb189-14"><a href="functionals.html#cb189-14" aria-hidden="true" tabindex="-1"></a>                              }</span>
<span id="cb189-15"><a href="functionals.html#cb189-15" aria-hidden="true" tabindex="-1"></a>                              res</span>
<span id="cb189-16"><a href="functionals.html#cb189-16" aria-hidden="true" tabindex="-1"></a>                            },</span>
<span id="cb189-17"><a href="functionals.html#cb189-17" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb189-18"><a href="functionals.html#cb189-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">for_alloc =</span> {</span>
<span id="cb189-19"><a href="functionals.html#cb189-19" aria-hidden="true" tabindex="-1"></a>                              res <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="fu">length</span>(to_do))</span>
<span id="cb189-20"><a href="functionals.html#cb189-20" aria-hidden="true" tabindex="-1"></a>                              <span class="cf">for</span> (j <span class="cf">in</span> to_do) {</span>
<span id="cb189-21"><a href="functionals.html#cb189-21" aria-hidden="true" tabindex="-1"></a>                                res[j] <span class="ot">&lt;-</span> <span class="fu">my_function</span>(j)</span>
<span id="cb189-22"><a href="functionals.html#cb189-22" aria-hidden="true" tabindex="-1"></a>                              }</span>
<span id="cb189-23"><a href="functionals.html#cb189-23" aria-hidden="true" tabindex="-1"></a>                              res</span>
<span id="cb189-24"><a href="functionals.html#cb189-24" aria-hidden="true" tabindex="-1"></a>                            },</span>
<span id="cb189-25"><a href="functionals.html#cb189-25" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb189-26"><a href="functionals.html#cb189-26" aria-hidden="true" tabindex="-1"></a>                            <span class="at">while_alloc =</span> {</span>
<span id="cb189-27"><a href="functionals.html#cb189-27" aria-hidden="true" tabindex="-1"></a>                              res <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="fu">length</span>(to_do))</span>
<span id="cb189-28"><a href="functionals.html#cb189-28" aria-hidden="true" tabindex="-1"></a>                              j <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb189-29"><a href="functionals.html#cb189-29" aria-hidden="true" tabindex="-1"></a>                              <span class="cf">while</span>(j <span class="sc">&lt;</span> <span class="fu">length</span>(to_do)) {</span>
<span id="cb189-30"><a href="functionals.html#cb189-30" aria-hidden="true" tabindex="-1"></a>                                res[to_do[j]] <span class="ot">&lt;-</span> <span class="fu">my_function</span>(to_do[j])</span>
<span id="cb189-31"><a href="functionals.html#cb189-31" aria-hidden="true" tabindex="-1"></a>                                j <span class="ot">&lt;-</span> j <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb189-32"><a href="functionals.html#cb189-32" aria-hidden="true" tabindex="-1"></a>                              }</span>
<span id="cb189-33"><a href="functionals.html#cb189-33" aria-hidden="true" tabindex="-1"></a>                              res</span>
<span id="cb189-34"><a href="functionals.html#cb189-34" aria-hidden="true" tabindex="-1"></a>                            },</span>
<span id="cb189-35"><a href="functionals.html#cb189-35" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb189-36"><a href="functionals.html#cb189-36" aria-hidden="true" tabindex="-1"></a>                            <span class="at">sapply =</span> {</span>
<span id="cb189-37"><a href="functionals.html#cb189-37" aria-hidden="true" tabindex="-1"></a>                              res <span class="ot">&lt;-</span> <span class="fu">sapply</span>(to_do, my_function)</span>
<span id="cb189-38"><a href="functionals.html#cb189-38" aria-hidden="true" tabindex="-1"></a>                            },</span>
<span id="cb189-39"><a href="functionals.html#cb189-39" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb189-40"><a href="functionals.html#cb189-40" aria-hidden="true" tabindex="-1"></a>                            <span class="at">map_dbl =</span> {</span>
<span id="cb189-41"><a href="functionals.html#cb189-41" aria-hidden="true" tabindex="-1"></a>                              res <span class="ot">&lt;-</span> <span class="fu">map_dbl</span>(to_do, my_function)</span>
<span id="cb189-42"><a href="functionals.html#cb189-42" aria-hidden="true" tabindex="-1"></a>                            }</span>
<span id="cb189-43"><a href="functionals.html#cb189-43" aria-hidden="true" tabindex="-1"></a>                          )</span>
<span id="cb189-44"><a href="functionals.html#cb189-44" aria-hidden="true" tabindex="-1"></a>                        })</span></code></pre></div>
<p>Die Ergebnisse dieses Testlaufs sehen so aus:</p>
<p><img src="Robustheit_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<p>Dabei stellen die Linien die Median-Verläufe der jeweiligen Aufrufe dar. Vorsicht: Die Achsen sind logarithmisch skaliert. Ohne diese Skalierung sehen die Ergebnisse so aus:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="functionals.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pmap_dfr</span>(<span class="fu">list</span>(sim_data<span class="sc">$</span>time,</span>
<span id="cb190-2"><a href="functionals.html#cb190-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">names</span>(sim_data<span class="sc">$</span>expression),</span>
<span id="cb190-3"><a href="functionals.html#cb190-3" aria-hidden="true" tabindex="-1"></a>              sim_data<span class="sc">$</span>n),</span>
<span id="cb190-4"><a href="functionals.html#cb190-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">~</span><span class="fu">tibble</span>(<span class="at">times =</span> <span class="fu">as.numeric</span>(..<span class="dv">1</span>),</span>
<span id="cb190-5"><a href="functionals.html#cb190-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">iterator =</span> ..<span class="dv">2</span>,</span>
<span id="cb190-6"><a href="functionals.html#cb190-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">reps =</span> <span class="dv">10</span><span class="sc">^</span>..<span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb190-7"><a href="functionals.html#cb190-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> reps,</span>
<span id="cb190-8"><a href="functionals.html#cb190-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> times,</span>
<span id="cb190-9"><a href="functionals.html#cb190-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> iterator)) <span class="sc">+</span></span>
<span id="cb190-10"><a href="functionals.html#cb190-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb190-11"><a href="functionals.html#cb190-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">geom=</span><span class="st">&#39;line&#39;</span>,</span>
<span id="cb190-12"><a href="functionals.html#cb190-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun =</span> median) <span class="sc">+</span></span>
<span id="cb190-13"><a href="functionals.html#cb190-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Zeit [s]&#39;</span>,</span>
<span id="cb190-14"><a href="functionals.html#cb190-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Iterierte Werte&#39;</span>) <span class="sc">+</span></span>
<span id="cb190-15"><a href="functionals.html#cb190-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&#39;Dark2&#39;</span>)</span></code></pre></div>
<p><img src="Robustheit_files/figure-html/unnamed-chunk-74-1.png" width="672" /></p>
<div id="aufgabe-10" class="section level3">
<h3>Aufgabe</h3>
<p>Benutzt <code>bench::mark</code> um die folgenden drei Mittelwerts-Funktionen zu vergleichen:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="functionals.html#cb191-1" aria-hidden="true" tabindex="-1"></a>my_for_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb191-2"><a href="functionals.html#cb191-2" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb191-3"><a href="functionals.html#cb191-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> x){</span>
<span id="cb191-4"><a href="functionals.html#cb191-4" aria-hidden="true" tabindex="-1"></a>    out <span class="ot">&lt;-</span> out <span class="sc">+</span> i</span>
<span id="cb191-5"><a href="functionals.html#cb191-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb191-6"><a href="functionals.html#cb191-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(out<span class="sc">/</span><span class="fu">length</span>(x))</span>
<span id="cb191-7"><a href="functionals.html#cb191-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb191-8"><a href="functionals.html#cb191-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-9"><a href="functionals.html#cb191-9" aria-hidden="true" tabindex="-1"></a>my_manual_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb191-10"><a href="functionals.html#cb191-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">sum</span>(x)<span class="sc">/</span><span class="fu">length</span>(x))</span>
<span id="cb191-11"><a href="functionals.html#cb191-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb191-12"><a href="functionals.html#cb191-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-13"><a href="functionals.html#cb191-13" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="functionals.html#cb192-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10000</span>)</span>
<span id="cb192-2"><a href="functionals.html#cb192-2" aria-hidden="true" tabindex="-1"></a>bmark <span class="ot">&lt;-</span> bench<span class="sc">::</span><span class="fu">mark</span>(<span class="at">mean =</span> <span class="fu">mean</span>(x),</span>
<span id="cb192-3"><a href="functionals.html#cb192-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">for_mean =</span> <span class="fu">my_for_mean</span>(x),</span>
<span id="cb192-4"><a href="functionals.html#cb192-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">man_mean =</span> <span class="fu">my_manual_mean</span>(x),</span>
<span id="cb192-5"><a href="functionals.html#cb192-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">iterations =</span> <span class="dv">10000</span>)</span></code></pre></div>
<p>Übrigens gibt es noch eine sehr nette Funktion, die man im Kontext von <code>bench::mark</code> nochmal erwähnen sollte:</p>
<p>Mit <code>autoplot(type = 'violin')</code> lassen sich die Ergebnisse eines Mikrobenchmarks ganz nett darstellen:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="functionals.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bench)</span>
<span id="cb193-2"><a href="functionals.html#cb193-2" aria-hidden="true" tabindex="-1"></a>bmark <span class="sc">%&gt;%</span> </span>
<span id="cb193-3"><a href="functionals.html#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(<span class="at">type =</span> <span class="st">&#39;violin&#39;</span>)</span></code></pre></div>
<p><img src="Robustheit_files/figure-html/unnamed-chunk-78-1.png" width="672" /></p>
</details>
</div>
</div>
<div id="eigene-functionals" class="section level2">
<h2>Eigene Functionals</h2>
<p>Warum Functionals neben den Iteratoren für uns praktisch sind, wird am Simulations-Beispiel klar.</p>
<p>Wenn wir eine Funktion schreiben wollen, die zum Beispiel für einen t-Test das Ausschöpfen des Alpha-Niveaus bei verschiedenen Verteilungen überprüft, könnten wir wie bisher für eine Untermenge der Möglichkeiten mit if-else die richtige Funktion auswählen.
Schöner wäre es aber doch, wenn wir eine Simulationsfunktion hätten, die einfach eine Funktion als Objekt nimmt und die Ergebnisse zurückgibt.</p>
<p>Dafür müssen wir erstmal verstehen, warum der folgende Aufruf funktioniert:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="functionals.html#cb194-1" aria-hidden="true" tabindex="-1"></a>rnd_fct <span class="ot">&lt;-</span> rnorm</span>
<span id="cb194-2"><a href="functionals.html#cb194-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-3"><a href="functionals.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rnd_fct</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] -0.4199126  0.2312317  0.4539680  0.2489447  1.0210670 -1.3311690
##  [7]  1.5289611  0.1749426 -0.8485907 -1.0582308</code></pre>
<p>Wir haben in <code>rnd_fct</code> einen Verweis auf <code>rnorm</code> abgelegt und können den Namen des Verweises jetzt äquivalent zum Inhalt des Ziels, also ganz einfach wie die ursprüngliche Funktion verwenden.</p>
<p>Das funktioniert aus ähnlichen Gründen, aus denen unsere Listen mit Verweisen kleiner als erwartet waren. Da wir den Inhalt nicht verändert haben, spart sich R den Aufwand die Funktion zu kopieren und legt einfach einen zweiten Verweis auf die <code>rnorm</code>-Funktion an, inklusive <code>body</code> und <code>formals</code>.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="functionals.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">body</span>(rnorm)</span></code></pre></div>
<pre><code>## .Call(C_rnorm, n, mean, sd)</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="functionals.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">body</span>(rnd_fct)</span></code></pre></div>
<pre><code>## .Call(C_rnorm, n, mean, sd)</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="functionals.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(rnorm)</span></code></pre></div>
<pre><code>## $n
## 
## 
## $mean
## [1] 0
## 
## $sd
## [1] 1</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="functionals.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(rnd_fct)</span></code></pre></div>
<pre><code>## $n
## 
## 
## $mean
## [1] 0
## 
## $sd
## [1] 1</code></pre>
<p>Mit anderen Worten können wir einen Verweis auf ein Funktions-Objekt wie die eigentliche Funktion verwenden. Diesen Umstand können wir ausnutzen, wenn wir unsere Simulationsfunktion schreiben, indem wir einfach ein Argument vorsehen, dass als Funktion benutzt werden kann.</p>
<p>So eine Funktion könnte so aussehen:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="functionals.html#cb204-1" aria-hidden="true" tabindex="-1"></a>generate_values <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">rnd_fct =</span> rnorm,</span>
<span id="cb204-2"><a href="functionals.html#cb204-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">n =</span> <span class="dv">1000</span>){</span>
<span id="cb204-3"><a href="functionals.html#cb204-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rnd_fct</span>(n))</span>
<span id="cb204-4"><a href="functionals.html#cb204-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb204-5"><a href="functionals.html#cb204-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-6"><a href="functionals.html#cb204-6" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_values</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1]  0.2994693  0.5303306  2.3644090 -1.5828983  0.3834167 -0.8116823
##  [7] -1.1964809 -0.6136671  1.2368626  0.5172003</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="functionals.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_values</span>(runif, <span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] 0.44395272 0.30926817 0.13344473 0.58773504 0.47318257 0.61197434
##  [7] 0.37293941 0.91837751 0.74896328 0.07670441</code></pre>
<p>Und schon ist unser erster Functional fertig.</p>
<div id="aufgabe-11" class="section level3">
<h3>Aufgabe</h3>
<p>Erstelle einen functional <code>summarise_for_me</code>, der einen Vektor als Argument x und eine Funktion als Argument <code>agg_fn</code> erwartet, und die Ihr dazu nutzen könnt, mit demselben Stichwort NA-bereinigt Summe, Mittelwert, Median
und SD des Vektors <code>c(10, NA, 21, 25, 13)</code> zu berechnen.</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="functionals.html#cb208-1" aria-hidden="true" tabindex="-1"></a>summarise_for_me <span class="ot">&lt;-</span> <span class="cf">function</span>(x, agg_fn){</span>
<span id="cb208-2"><a href="functionals.html#cb208-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">agg_fn</span>(x, <span class="at">na.rm =</span> T))</span>
<span id="cb208-3"><a href="functionals.html#cb208-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb208-4"><a href="functionals.html#cb208-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-5"><a href="functionals.html#cb208-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="cn">NA</span>, <span class="dv">21</span>, <span class="dv">25</span>, <span class="dv">13</span>)</span>
<span id="cb208-6"><a href="functionals.html#cb208-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, mean)</span></code></pre></div>
<pre><code>## [1] 17.25</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="functionals.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, sum)</span></code></pre></div>
<pre><code>## [1] 69</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="functionals.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, median)</span></code></pre></div>
<pre><code>## [1] 17</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="functionals.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, sd)</span></code></pre></div>
<pre><code>## [1] 6.946222</code></pre>
</details>
</div>
</div>
<div id="argumente-durchreichen" class="section level2">
<h2>Argumente durchreichen</h2>
<p>Unsere schöne Funktion wird offensichtlich problematisch, wenn wir zum Beispiel <code>rf</code> übergeben:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="functionals.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_values</span>(rf, <span class="at">n =</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error in rnd_fct(n): argument &quot;df1&quot; is missing, with no default</code></pre>
<p>Dafür gibt es in R den Platzhalter <code>...</code>, dem Ihr auch schon an anderer Stelle begegnet sein könntet. <code>...</code> heißt nichts anderes als dass mehr Argumente möglich sind, bei denen wir noch nicht so ganz sicher sind, welche es sein werden.</p>
<p>Benutzen können wir das wie jedes andere Argument:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="functionals.html#cb218-1" aria-hidden="true" tabindex="-1"></a>generate_values <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">rnd_fct =</span> rnorm,</span>
<span id="cb218-2"><a href="functionals.html#cb218-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">n =</span> <span class="dv">1000</span>,</span>
<span id="cb218-3"><a href="functionals.html#cb218-3" aria-hidden="true" tabindex="-1"></a>                            ...){</span>
<span id="cb218-4"><a href="functionals.html#cb218-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rnd_fct</span>(n, ...))</span>
<span id="cb218-5"><a href="functionals.html#cb218-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb218-6"><a href="functionals.html#cb218-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-7"><a href="functionals.html#cb218-7" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_values</span>(rf, <span class="at">n =</span> <span class="dv">100</span>, <span class="at">df1 =</span> <span class="dv">5</span>, <span class="at">df2 =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##   [1]  1.30800244  0.34386902  1.07185386  1.26556593  1.07752607  2.03497546
##   [7]  0.63611837  0.87353987  1.03485287  0.81601814  1.02639860  0.53705763
##  [13]  0.31405869  0.52439110  1.39648091  1.06064416  0.46664706  0.27070874
##  [19]  2.25204656  0.86366757  1.15693767  1.81259878  0.56410316  0.94787277
##  [25]  3.89529621  0.37557481  1.92586101  0.42849312  1.49773976  0.05813357
##  [31]  0.44438564  0.14525814  2.36696864  1.66339698  0.53827284  1.65650546
##  [37]  0.46055553  1.60033949  0.30694711  1.85127786  1.48217075  2.62585139
##  [43]  2.14504737  0.81919515  1.38374697  0.89745419  0.37185526  1.13406191
##  [49]  1.31479498  0.65300786  0.80247351  1.80981147  0.32507006  1.55078471
##  [55]  1.18369100  0.08447330  1.91984029  0.13914696  0.79177535  0.94549312
##  [61]  0.93354001  0.28173625  1.45672514  0.60835450  0.91438839  0.75916434
##  [67]  1.97458061  0.17009112  1.49389432  2.16806557  1.61570079  0.33946545
##  [73]  1.30805728  1.48765000  0.41400625  0.98439720  2.91565515  1.18407534
##  [79]  0.26514127  0.71282182  0.73094521  0.94654944  1.06797966 12.72549312
##  [85]  2.87107955  1.15050343  0.27958205  0.55015957  0.47310973  0.89918620
##  [91]  1.87930474  1.79708365  2.26899240  1.19920258  1.43975652  0.47004905
##  [97]  1.47975343  1.80849062  2.76730517  1.20793446</code></pre>
<p>Sollten wir in dieser Liste noch für einen Sonderfall testen wollen (zum Beispiel um Sonderbehandlungen durchzuführen), können wir mit <code>hasArg</code> auf ein Argument testen:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="functionals.html#cb220-1" aria-hidden="true" tabindex="-1"></a>generate_values <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">rnd_fct =</span> rnorm,</span>
<span id="cb220-2"><a href="functionals.html#cb220-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">n =</span> <span class="dv">1000</span>,</span>
<span id="cb220-3"><a href="functionals.html#cb220-3" aria-hidden="true" tabindex="-1"></a>                            ...){</span>
<span id="cb220-4"><a href="functionals.html#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">hasArg</span>(df2)){</span>
<span id="cb220-5"><a href="functionals.html#cb220-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&#39;more than one df</span><span class="sc">\n</span><span class="st">&#39;</span>)</span>
<span id="cb220-6"><a href="functionals.html#cb220-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb220-7"><a href="functionals.html#cb220-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rnd_fct</span>(n, ...))</span>
<span id="cb220-8"><a href="functionals.html#cb220-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb220-9"><a href="functionals.html#cb220-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-10"><a href="functionals.html#cb220-10" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_values</span>(rf, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">df1 =</span> <span class="dv">5</span>, <span class="at">df2 =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## more than one df</code></pre>
<pre><code>##  [1] 1.7191709 0.3844587 0.3358765 0.4924094 2.3220831 0.8904054 1.5374226
##  [8] 0.3068908 1.7804266 0.1659158</code></pre>
<p>Damit könnten wir auch eigene Argumente definieren, wenn wir die Funktionsdefinition übersichtlich halten wollen:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="functionals.html#cb223-1" aria-hidden="true" tabindex="-1"></a>generate_values <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">rnd_fct =</span> rnorm,</span>
<span id="cb223-2"><a href="functionals.html#cb223-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">n =</span> <span class="dv">1000</span>,</span>
<span id="cb223-3"><a href="functionals.html#cb223-3" aria-hidden="true" tabindex="-1"></a>                            ...){</span>
<span id="cb223-4"><a href="functionals.html#cb223-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">hasArg</span>(skew)){</span>
<span id="cb223-5"><a href="functionals.html#cb223-5" aria-hidden="true" tabindex="-1"></a>    args <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb223-6"><a href="functionals.html#cb223-6" aria-hidden="true" tabindex="-1"></a>    skew <span class="ot">&lt;-</span> args<span class="sc">$</span>skew</span>
<span id="cb223-7"><a href="functionals.html#cb223-7" aria-hidden="true" tabindex="-1"></a>    args <span class="ot">&lt;-</span> args[<span class="fu">names</span>(args) <span class="sc">!=</span> <span class="st">&#39;skew&#39;</span>]</span>
<span id="cb223-8"><a href="functionals.html#cb223-8" aria-hidden="true" tabindex="-1"></a>    args<span class="sc">$</span>n <span class="ot">&lt;-</span> n</span>
<span id="cb223-9"><a href="functionals.html#cb223-9" aria-hidden="true" tabindex="-1"></a>    out <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rnd_fct, args)</span>
<span id="cb223-10"><a href="functionals.html#cb223-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(out <span class="sc">+</span> skew <span class="sc">*</span> out<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb223-11"><a href="functionals.html#cb223-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb223-12"><a href="functionals.html#cb223-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rnd_fct</span>(n, ...))</span>
<span id="cb223-13"><a href="functionals.html#cb223-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb223-14"><a href="functionals.html#cb223-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-15"><a href="functionals.html#cb223-15" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_values</span>(rf, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">df1 =</span> <span class="dv">5</span>, <span class="at">df2 =</span> <span class="dv">10</span>, <span class="at">skew =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##  [1] 1.4748042 2.4036888 0.3793993 1.9490523 4.1082832 1.2057001 0.5293067
##  [8] 0.8127482 0.2072046 4.8083358</code></pre>
<p>So haben wir eine allgemeine Funktion geschrieben, die zum einen flexibel Daten mit übergebenen Funktionen generiert und zum anderen im Falle eines gesetzten Arguments <code>skew</code> dieses aus den Argumenten nimmt und das Ergebnis des Funktionsarguments mit den restlichen <code>...</code>-Argumenten mit dem Skew transformiert.</p>
<p>Auch nochmal zu betonen ist, dass wir den <code>...</code>-Operator sowohl nutzen können, um die Argumente durchzureichen:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="functionals.html#cb225-1" aria-hidden="true" tabindex="-1"></a>do_something <span class="ot">&lt;-</span> <span class="cf">function</span>(.fn, ...){</span>
<span id="cb225-2"><a href="functionals.html#cb225-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">.fn</span>(...))</span>
<span id="cb225-3"><a href="functionals.html#cb225-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb225-4"><a href="functionals.html#cb225-4" aria-hidden="true" tabindex="-1"></a><span class="fu">do_something</span>(mean, <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">trim =</span> .<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<p>als auch um eine Liste zu erstellen, die wir dann mit <code>do.call</code> als Argumentliste übergeben:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="functionals.html#cb227-1" aria-hidden="true" tabindex="-1"></a>do_something <span class="ot">&lt;-</span> <span class="cf">function</span>(.fn, ...){</span>
<span id="cb227-2"><a href="functionals.html#cb227-2" aria-hidden="true" tabindex="-1"></a>  args <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb227-3"><a href="functionals.html#cb227-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">do.call</span>(.fn, args))</span>
<span id="cb227-4"><a href="functionals.html#cb227-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb227-5"><a href="functionals.html#cb227-5" aria-hidden="true" tabindex="-1"></a><span class="fu">do_something</span>(mean, <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">trim =</span> .<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<p>Letztere Methode ist dann praktisch, wenn wir entweder die Argumente ergänzen wollen, oder wie im Fall oben, nur Teile des Calls an eine Funktion weiterreichen wollen.</p>
<p>Da diese “impliziten” Argumente aber für <code>formals</code> und Autocomplete nicht zugänglich sind, außerdem das schreiben eines Arguments als expliziten Teil der Funktion einfacher ist, sollte außer bei sehr komplexen (z.B. grafischen) Funktionen auf diese Art der Argumente eher verzichtet werden.</p>
<p>Wir könnten die Verteilungs-Funktion mit Skew von oben ja auch (viel übersichtlicher und mit Standardwert) wie folgt schreiben:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="functionals.html#cb229-1" aria-hidden="true" tabindex="-1"></a>generate_values <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">rnd_fct =</span> rnorm,</span>
<span id="cb229-2"><a href="functionals.html#cb229-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">n =</span> <span class="dv">1000</span>,</span>
<span id="cb229-3"><a href="functionals.html#cb229-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">skew =</span> <span class="dv">0</span>,</span>
<span id="cb229-4"><a href="functionals.html#cb229-4" aria-hidden="true" tabindex="-1"></a>                            ...){</span>
<span id="cb229-5"><a href="functionals.html#cb229-5" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">rnd_fct</span>(n, ...)</span>
<span id="cb229-6"><a href="functionals.html#cb229-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(out <span class="sc">+</span> skew <span class="sc">*</span> out<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb229-7"><a href="functionals.html#cb229-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb229-8"><a href="functionals.html#cb229-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-9"><a href="functionals.html#cb229-9" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_values</span>(rf, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">df1 =</span> <span class="dv">5</span>, <span class="at">df2 =</span> <span class="dv">10</span>, <span class="at">skew =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##  [1] 34.6888898  5.5226003  5.1995615 22.6796614 23.0399780  0.5764265
##  [7]  2.2664878 19.1496233  4.9516273  0.4087788</code></pre>
<div id="aufgabe-12" class="section level3">
<h3>Aufgabe</h3>
<p>Ergänze den functional <code>summarise_for_me</code> um einen <code>...</code>-Operator als Argument.
Benutze diesen, um Argumente an die Funktionen weiterzugeben.</p>
<p>Baue außerdem eine Ausnahmebedingung in die Funktion ein, die falls das Argument <code>scale</code> auf TRUE gesetzt ist, die Daten vor der Aggregation z-transformiert.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<p>Stelle außerdem sicher, dass die Funktion unabhängig von der Eingabe des Nutzers <code>na.rm</code> auf <code>TRUE</code> setzt.</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="functionals.html#cb231-1" aria-hidden="true" tabindex="-1"></a>summarise_for_me <span class="ot">&lt;-</span> <span class="cf">function</span>(x, agg_fn, ...){</span>
<span id="cb231-2"><a href="functionals.html#cb231-2" aria-hidden="true" tabindex="-1"></a>  args <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb231-3"><a href="functionals.html#cb231-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">hasArg</span>(scale)){</span>
<span id="cb231-4"><a href="functionals.html#cb231-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(args<span class="sc">$</span>scale){</span>
<span id="cb231-5"><a href="functionals.html#cb231-5" aria-hidden="true" tabindex="-1"></a>      x <span class="ot">&lt;-</span> <span class="fu">scale</span>(x)</span>
<span id="cb231-6"><a href="functionals.html#cb231-6" aria-hidden="true" tabindex="-1"></a>      args <span class="ot">&lt;-</span> args[<span class="sc">!</span>(<span class="fu">names</span>(args) <span class="sc">==</span> <span class="st">&#39;scale&#39;</span>)]</span>
<span id="cb231-7"><a href="functionals.html#cb231-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb231-8"><a href="functionals.html#cb231-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb231-9"><a href="functionals.html#cb231-9" aria-hidden="true" tabindex="-1"></a>  args <span class="ot">&lt;-</span> args[<span class="sc">!</span>(<span class="fu">names</span>(args) <span class="sc">==</span> <span class="st">&#39;na.rm&#39;</span>)]</span>
<span id="cb231-10"><a href="functionals.html#cb231-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">agg_fn</span>(x, <span class="at">na.rm =</span> T))</span>
<span id="cb231-11"><a href="functionals.html#cb231-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb231-12"><a href="functionals.html#cb231-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-13"><a href="functionals.html#cb231-13" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="cn">NA</span>, <span class="dv">21</span>, <span class="dv">25</span>, <span class="dv">13</span>)</span>
<span id="cb231-14"><a href="functionals.html#cb231-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, mean, <span class="at">scale =</span> T)</span></code></pre></div>
<pre><code>## [1] 2.775558e-17</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="functionals.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, sum, <span class="at">scale =</span> T)</span></code></pre></div>
<pre><code>## [1] 1.110223e-16</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="functionals.html#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, median, <span class="at">scale =</span> T)</span></code></pre></div>
<pre><code>## [1] -0.03599079</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="functionals.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, sd, <span class="at">scale =</span> F)</span></code></pre></div>
<pre><code>## [1] 6.946222</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="functionals.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_for_me</span>(x, sd, <span class="at">scale =</span> T)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
</details>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p>oder Vektoren<a href="functionals.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>Das funktioniert ganz einfach mit der <code>scale</code>-Funktion.<a href="functionals.html#fnref6" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="attribute.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="simulations-und-programmierübungen-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Robustheit.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
