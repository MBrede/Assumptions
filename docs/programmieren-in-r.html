<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Programmieren in R | Robustheit</title>
  <meta name="description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Programmieren in R | Robustheit" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Programmieren in R | Robustheit" />
  
  <meta name="twitter:description" content="Seminar zur Vertiefung psychologischer Methodenlehre - Robustheit und Voraussetzungstests" />
  

<meta name="author" content="Max Brede und Johannes Andres" />


<meta name="date" content="2021-10-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="literatur.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Robustheit und Voraussetzungstests</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#semesterplan"><i class="fa fa-check"></i>Semesterplan</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html"><i class="fa fa-check"></i>Programmieren in R</a>
<ul>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html#funktionen"><i class="fa fa-check"></i>Funktionen</a></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html#geschachtelte-funktionen"><i class="fa fa-check"></i>Geschachtelte Funktionen</a></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html#optionale-argumente-und-if-statements"><i class="fa fa-check"></i>Optionale Argumente und if-Statements</a></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html#zufallswerte"><i class="fa fa-check"></i>Zufallswerte</a></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html#schleifen"><i class="fa fa-check"></i>Schleifen</a></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html#listen"><i class="fa fa-check"></i>Listen</a></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html#attribute"><i class="fa fa-check"></i>Attribute</a></li>
<li class="chapter" data-level="" data-path="programmieren-in-r.html"><a href="programmieren-in-r.html#functionals"><i class="fa fa-check"></i>Functionals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatur.html"><a href="literatur.html"><i class="fa fa-check"></i>Literatur</a></li>
<li class="divider"></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Robustheit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programmieren-in-r" class="section level1">
<h1>Programmieren in R</h1>
<div id="funktionen" class="section level2">
<h2>Funktionen</h2>
<p>Wir kennen Funktionen ja schon aus den EDV-Veranstaltungen.</p>
<p>Zum Beispiel macht die <code>sum</code>-Funktion mit einem Vektor das, was der Name sagt:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="programmieren-in-r.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="programmieren-in-r.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Funktionen können wir auch selbst definieren. Eine Funktion, die uns begrüßt könnte zum Beispiel wie folgt aussehen:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="programmieren-in-r.html#cb5-1" aria-hidden="true" tabindex="-1"></a>greet_me <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb5-2"><a href="programmieren-in-r.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="st">&#39;Hello! Nice to see you!&#39;</span>)</span>
<span id="cb5-3"><a href="programmieren-in-r.html#cb5-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Wenn wir jetzt die <code>greet_me</code>-Funktion aufrufen, sehen wir:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="programmieren-in-r.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_me</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Hello! Nice to see you!&quot;</code></pre>
<p>In der Funktionsdefinition können wir ein paar Teile wiederkennen.
Zum Einen ist da der <code>greet_me &lt;-</code>-Teil, den wir ja schon als Objektzuweisung kennen. Wir weisen also dem Ergebnis eines Ausdrucks den Namen <code>greet_me</code> zu.</p>
<p>Funktions-<em>Objekte</em> werden also genauso wie Datensätze und Vektoren als eine Kombination von Namen und zugehörigem Inhalt definiert.</p>
<p>Dabei erstellt die Funktion <code>function()</code> einen Objektinhalt, der aus <em>body</em> und <em>formals</em> besteht und in einem <em>environment</em> definiert ist.</p>
<p>Der <em>body</em> ist der Teil der Funktion, der definiert, was passieren soll und wird in R in geschweiften Klammern hinter der <code>function</code>-Funktion definiert
In unserem Beispiel besteht der body aus dem Aufruf, einen Text zurückzugeben:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="programmieren-in-r.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">body</span>(greet_me)</span></code></pre></div>
<pre><code>## {
##     return(&quot;Hello! Nice to see you!&quot;)
## }</code></pre>
<p>Die <em>formals</em> sind die Argumente, die bei der Ausführung des <em>body</em>s genutzt werden sollen.</p>
<p>In unserem Beispiel haben wir noch keine Argumente berücksichtigt:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="programmieren-in-r.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(greet_me)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>Wir könnten die Funktion aber neu definieren, so dass sie einen gegebenen Namen begrüßt. Dafür geben wir der <code>function</code>-Funktion ein Argument, das der Name des erwarteten Arguments sein soll:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="programmieren-in-r.html#cb12-1" aria-hidden="true" tabindex="-1"></a>greet_someone <span class="ot">&lt;-</span> <span class="cf">function</span>(name){</span>
<span id="cb12-2"><a href="programmieren-in-r.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">paste0</span>(<span class="st">&#39;Hello &#39;</span>,name,<span class="st">&#39;! Nice to see you!&#39;</span>))</span>
<span id="cb12-3"><a href="programmieren-in-r.html#cb12-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-4"><a href="programmieren-in-r.html#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="programmieren-in-r.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone</span>(<span class="st">&#39;Marvin&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Marvin! Nice to see you!&quot;</code></pre>
<p>Wenn wir uns jetzt nochmal die <code>formals</code> ausgeben lassen, sehen wir, dass ein Argument vorgesehen ist:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="programmieren-in-r.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(greet_someone)</span></code></pre></div>
<pre><code>## $name</code></pre>
<p>Der letzte Teil einer Funktionsdefinition ist das <em>environment</em>. Damit ist der Namensraum gemeint, auf den die Funktion zugreifen kann:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="programmieren-in-r.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(greet_someone)</span></code></pre></div>
<pre><code>## &lt;environment: R_GlobalEnv&gt;</code></pre>
<p>In unserem Beispiel wurde die Funktion in der laufenden R-Session definiert (wie die allermeisten Funktionen, die wir dieses Semester nutzen werden). Der Output <code>R_GlobalEnv</code> heißt also, dass die Funktion auf Objekte in der Haupt-R-Session zurückgreifen kann.</p>
<p>Praktisch heißt das, dass wir zum Beispiel Konstanten einmal außerhalb einer Funktion definieren können, die diese dann nutzen kann:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="programmieren-in-r.html#cb18-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb18-2"><a href="programmieren-in-r.html#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="programmieren-in-r.html#cb18-3" aria-hidden="true" tabindex="-1"></a>greet_someone_n_times <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb18-4"><a href="programmieren-in-r.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rep</span>(<span class="fu">paste0</span>(<span class="st">&#39;Hello &#39;</span>, </span>
<span id="cb18-5"><a href="programmieren-in-r.html#cb18-5" aria-hidden="true" tabindex="-1"></a>                    name, </span>
<span id="cb18-6"><a href="programmieren-in-r.html#cb18-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&#39;! Nice to see you!&#39;</span>), </span>
<span id="cb18-7"><a href="programmieren-in-r.html#cb18-7" aria-hidden="true" tabindex="-1"></a>             n))</span>
<span id="cb18-8"><a href="programmieren-in-r.html#cb18-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-9"><a href="programmieren-in-r.html#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="programmieren-in-r.html#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone_n_times</span>(<span class="st">&#39;Marvin&#39;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
##  [3] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
##  [5] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
##  [7] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
##  [9] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;</code></pre>
<p>Was das aber nicht heißt ist, dass die Funktion eine externe Variable ändern kann:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="programmieren-in-r.html#cb20-1" aria-hidden="true" tabindex="-1"></a>greet_someone_n_times <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb20-2"><a href="programmieren-in-r.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-3"><a href="programmieren-in-r.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb20-4"><a href="programmieren-in-r.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-5"><a href="programmieren-in-r.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rep</span>(<span class="fu">paste0</span>(<span class="st">&#39;Hello &#39;</span>, </span>
<span id="cb20-6"><a href="programmieren-in-r.html#cb20-6" aria-hidden="true" tabindex="-1"></a>                    name, </span>
<span id="cb20-7"><a href="programmieren-in-r.html#cb20-7" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&#39;! Nice to see you!&#39;</span>), </span>
<span id="cb20-8"><a href="programmieren-in-r.html#cb20-8" aria-hidden="true" tabindex="-1"></a>             n))</span>
<span id="cb20-9"><a href="programmieren-in-r.html#cb20-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-10"><a href="programmieren-in-r.html#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="programmieren-in-r.html#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone_n_times</span>(<span class="st">&#39;Marvin&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
## [3] &quot;Hello Marvin! Nice to see you!&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="programmieren-in-r.html#cb22-1" aria-hidden="true" tabindex="-1"></a>n</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Das liegt daran, dass die Funktion beim Aufrufen eine Kopie des globalen Environments als eigene Variablenumgebung zugewiesen bekommt und diese Kopie auch verändern kann. Die Kopie wird aber bei Beenden der Funktion verworfen, so dass Änderungen in der Funktion nicht erhalten bleiben.</p>
<p>Dabei werden die Argumente der Funktion dem Environment der Funktion hinzugefügt, wobei im Zweifelsfall gleichnamige Objekte für die Funktion überschrieben werden:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="programmieren-in-r.html#cb24-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb24-2"><a href="programmieren-in-r.html#cb24-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb24-3"><a href="programmieren-in-r.html#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="programmieren-in-r.html#cb24-4" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y){</span>
<span id="cb24-5"><a href="programmieren-in-r.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>(x,y))</span>
<span id="cb24-6"><a href="programmieren-in-r.html#cb24-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-7"><a href="programmieren-in-r.html#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="programmieren-in-r.html#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="dv">21</span>,<span class="dv">22</span>)</span></code></pre></div>
<pre><code>## [1] 21 22</code></pre>
<div id="aufgabe" class="section level3">
<h3>Aufgabe</h3>
<ol style="list-style-type: decimal">
<li><p>Erstelle eine Funktion mit dem Namen <code>my_mean</code>, die den Mittelwert eines gegebenen Vektors berechnet.</p></li>
<li><p>Was ergibt der folgende Aufruf:</p></li>
</ol>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="programmieren-in-r.html#cb26-1" aria-hidden="true" tabindex="-1"></a>dummy_function <span class="ot">&lt;-</span> <span class="cf">function</span>(a,b){</span>
<span id="cb26-2"><a href="programmieren-in-r.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  a <span class="sc">*</span> b</span>
<span id="cb26-3"><a href="programmieren-in-r.html#cb26-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-4"><a href="programmieren-in-r.html#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="programmieren-in-r.html#cb26-5" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">dummy_function</span>(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb26-6"><a href="programmieren-in-r.html#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="programmieren-in-r.html#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(dummy_function)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Was ist am Ende des folgenden Aufrufs in <code>number</code> abgelegt?</li>
</ol>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="programmieren-in-r.html#cb27-1" aria-hidden="true" tabindex="-1"></a>number <span class="ot">&lt;-</span> <span class="st">&#39;a number&#39;</span></span>
<span id="cb27-2"><a href="programmieren-in-r.html#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="programmieren-in-r.html#cb27-3" aria-hidden="true" tabindex="-1"></a>important_calculation <span class="ot">&lt;-</span> <span class="cf">function</span>(number){</span>
<span id="cb27-4"><a href="programmieren-in-r.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  number <span class="ot">&lt;-</span> <span class="dv">42</span> <span class="sc">/</span> number <span class="sc">*</span> number</span>
<span id="cb27-5"><a href="programmieren-in-r.html#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(number)</span>
<span id="cb27-6"><a href="programmieren-in-r.html#cb27-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb27-7"><a href="programmieren-in-r.html#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="programmieren-in-r.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="fu">important_calculation</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 42</code></pre>
<details>
<summary>
Antworten
</summary>
<p><strong>1.</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="programmieren-in-r.html#cb29-1" aria-hidden="true" tabindex="-1"></a>my_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb29-2"><a href="programmieren-in-r.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">sum</span>(x)<span class="sc">/</span><span class="fu">length</span>(x))</span>
<span id="cb29-3"><a href="programmieren-in-r.html#cb29-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>2.</strong></p>
<pre><code>## $a
## 
## 
## $b</code></pre>
<p><strong>3.</strong></p>
<p><code>'a number'</code></p>
</details>
</div>
</div>
<div id="geschachtelte-funktionen" class="section level2">
<h2>Geschachtelte Funktionen</h2>
<p>Um den Code übersichtlicher zu halten, können Teile von Funktionen in andere Funktionen ausgegliedert werden.
Dabei nutzen wir, dass unsere Funktionen auch auf das global Environment zugreifen und Funktionen ja auch nur Arten von Objekten sind.</p>
<p>Wenn wir unsere Funktionen <code>greet_someone</code> und <code>greet_someone_n_times</code> von vorhin nochmal angucken sehen wir, dass ein Teil des Codes in beiden auftaucht:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="programmieren-in-r.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(greet_someone)</span></code></pre></div>
<pre><code>## function(name){
##   return(paste0(&#39;Hello &#39;,name,&#39;! Nice to see you!&#39;))
## }</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="programmieren-in-r.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(greet_someone_n_times)</span></code></pre></div>
<pre><code>## function(name) {
##   
##   n &lt;- 3
##   
##   return(rep(paste0(&#39;Hello &#39;, 
##                     name, 
##                     &#39;! Nice to see you!&#39;), 
##              n))
## }</code></pre>
<p>Wir können <code>greet_someone_n_times</code> jetzt so umschreiben, dass sie <code>greet_someone</code> benutzt:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="programmieren-in-r.html#cb35-1" aria-hidden="true" tabindex="-1"></a>greet_someone_n_times <span class="ot">&lt;-</span> <span class="cf">function</span>(name){</span>
<span id="cb35-2"><a href="programmieren-in-r.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb35-3"><a href="programmieren-in-r.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb35-4"><a href="programmieren-in-r.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rep</span>(<span class="fu">greet_someone</span>(name), </span>
<span id="cb35-5"><a href="programmieren-in-r.html#cb35-5" aria-hidden="true" tabindex="-1"></a>             n))</span>
<span id="cb35-6"><a href="programmieren-in-r.html#cb35-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-7"><a href="programmieren-in-r.html#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="programmieren-in-r.html#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="programmieren-in-r.html#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone_n_times</span>(<span class="st">&#39;Marvin&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
## [3] &quot;Hello Marvin! Nice to see you!&quot;</code></pre>
<div id="aufgabe-1" class="section level3">
<h3>Aufgabe</h3>
<ol style="list-style-type: decimal">
<li>Erstelle eine <code>my_var</code> Funktion, die die unkorrigierte Varianz eines Vektors (<span class="math inline">\(S^2 = {1\over{n}} \sum_{i=1}^n(x_i -M_X)^2\)</span>) berechnet. Benutze für den Mittelwert deine Mittelwerts-Funktion aus dem letzten Aufgaben-Block.</li>
</ol>
<details>
<summary>
Antworten
</summary>
<p><strong>1.</strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="programmieren-in-r.html#cb37-1" aria-hidden="true" tabindex="-1"></a>my_var <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb37-2"><a href="programmieren-in-r.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  m_x <span class="ot">&lt;-</span> <span class="fu">my_mean</span>(x)</span>
<span id="cb37-3"><a href="programmieren-in-r.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-4"><a href="programmieren-in-r.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> (x <span class="sc">-</span> m_x)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb37-5"><a href="programmieren-in-r.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-6"><a href="programmieren-in-r.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="dv">1</span><span class="sc">/</span><span class="fu">length</span>(x) <span class="sc">*</span> <span class="fu">sum</span>(x))</span>
<span id="cb37-7"><a href="programmieren-in-r.html#cb37-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</details>
</div>
</div>
<div id="optionale-argumente-und-if-statements" class="section level2">
<h2>Optionale Argumente und if-Statements</h2>
<p>Unsere <code>greet_someone_n_times</code>-Funktion sieht ja im Moment wie folgt aus:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="programmieren-in-r.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(greet_someone_n_times)</span></code></pre></div>
<pre><code>## function(name){
##   n &lt;- 3
##   
##   return(rep(greet_someone(name), 
##              n))
## }</code></pre>
<p>Ungünstig daran ist noch, dass das <code>n</code> bei jedem Aufruf als Konstante neu definiert ist.</p>
<p>Um dieses n anpassen zu können, können wir es als zweites Argument übergeben, das beim Aufruf festgelegt werden kann:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="programmieren-in-r.html#cb40-1" aria-hidden="true" tabindex="-1"></a>greet_someone_n_times <span class="ot">&lt;-</span> <span class="cf">function</span>(name, n){</span>
<span id="cb40-2"><a href="programmieren-in-r.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rep</span>(<span class="fu">greet_someone</span>(name), </span>
<span id="cb40-3"><a href="programmieren-in-r.html#cb40-3" aria-hidden="true" tabindex="-1"></a>             n))</span>
<span id="cb40-4"><a href="programmieren-in-r.html#cb40-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-5"><a href="programmieren-in-r.html#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="programmieren-in-r.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone_n_times</span>(<span class="st">&#39;Marvin&#39;</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
## [3] &quot;Hello Marvin! Nice to see you!&quot;</code></pre>
<p>Da wir uns aber das Tippen sparen wollen und nicht jedes Mal unseren Standard-Fall (n=3) explizit machen wollen, können wir dem Argument einen Standardwert zuweisen.</p>
<p>Dadurch machen wir aus dem <code>n</code> ein <em>optionales Argument</em>, wie wir es ja auch schon aus anderen Situationen kennen:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="programmieren-in-r.html#cb42-1" aria-hidden="true" tabindex="-1"></a>greet_someone_n_times <span class="ot">&lt;-</span> <span class="cf">function</span>(name, <span class="at">n=</span><span class="dv">3</span>){</span>
<span id="cb42-2"><a href="programmieren-in-r.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">rep</span>(<span class="fu">greet_someone</span>(name), </span>
<span id="cb42-3"><a href="programmieren-in-r.html#cb42-3" aria-hidden="true" tabindex="-1"></a>             n))</span>
<span id="cb42-4"><a href="programmieren-in-r.html#cb42-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-5"><a href="programmieren-in-r.html#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="programmieren-in-r.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone_n_times</span>(<span class="st">&#39;Marvin&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
## [3] &quot;Hello Marvin! Nice to see you!&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="programmieren-in-r.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone_n_times</span>(<span class="st">&#39;Marvin&#39;</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
## [3] &quot;Hello Marvin! Nice to see you!&quot; &quot;Hello Marvin! Nice to see you!&quot;
## [5] &quot;Hello Marvin! Nice to see you!&quot;</code></pre>
<p>Als letzten Schritt wollen wir besonders höflich zu speziellen Nutzern sein. So soll der Name ‘Justus’<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> ausschweifender gegrüßt werden, als alle anderen Namen.</p>
<p>Um das umsetzten zu können, müssen wir irgendwie einen Test einfügen, ob der gegebene Name gleich ‘Justus’ ist.</p>
<p>Dafür können wir ein so genanntes <code>if...else</code>-Statement nutzen.
Die erste Hälfte, das <code>if</code>-Statement ermöglicht es uns, besonderes Verhalten auszulösen, wenn eine logische Bedingung erfüllt ist. Das <code>else</code> danach können wir nutzen um jeden anderen Fall zu definieren:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="programmieren-in-r.html#cb46-1" aria-hidden="true" tabindex="-1"></a>greet_someone <span class="ot">&lt;-</span> <span class="cf">function</span>(name){</span>
<span id="cb46-2"><a href="programmieren-in-r.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(name <span class="sc">==</span> <span class="st">&#39;Justus&#39;</span>){</span>
<span id="cb46-3"><a href="programmieren-in-r.html#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste0</span>(<span class="st">&#39;Hello &#39;</span>,name,<span class="st">&#39;! How extraordinarily nice to see you! I hope you are doing well!&#39;</span>))</span>
<span id="cb46-4"><a href="programmieren-in-r.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb46-5"><a href="programmieren-in-r.html#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste0</span>(<span class="st">&#39;Hello &#39;</span>,name,<span class="st">&#39;! Nice to see you!&#39;</span>))</span>
<span id="cb46-6"><a href="programmieren-in-r.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb46-7"><a href="programmieren-in-r.html#cb46-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Das funktioniert zwar:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="programmieren-in-r.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone</span>(<span class="st">&#39;Justus&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Justus! How extraordinarily nice to see you! I hope you are doing well!&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="programmieren-in-r.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone</span>(<span class="st">&#39;Jonas&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Jonas! Nice to see you!&quot;</code></pre>
<p>Und bemerkensweiterweise auch in der geschachtelten Form:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="programmieren-in-r.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet_someone_n_times</span>(<span class="st">&#39;Justus&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello Justus! How extraordinarily nice to see you! I hope you are doing well!&quot;
## [2] &quot;Hello Justus! How extraordinarily nice to see you! I hope you are doing well!&quot;
## [3] &quot;Hello Justus! How extraordinarily nice to see you! I hope you are doing well!&quot;</code></pre>
<p>Aber wirklich gut lesbar ist das nicht unbedingt.
Ein gängiger Ansatz, um die Lesbarkeit einer solchen Funktion mit verschiedenen Outputs zu verbessern, ist, nur ein <code>return</code>-statement ans Ende der Funktion zu stellen und die Teil-Änderung durch das <code>if</code>-statement in einem Objekt abzulegen, das im gemeinsamen <code>return</code> genutzt wird. So könnten wir den letzten Teil des Grußes zum Beispiel in einem Objekt namens <code>text</code> ablegen und je nach Nutzer anpassen:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="programmieren-in-r.html#cb53-1" aria-hidden="true" tabindex="-1"></a>greet_someone <span class="ot">&lt;-</span> <span class="cf">function</span>(name){</span>
<span id="cb53-2"><a href="programmieren-in-r.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(name <span class="sc">==</span> <span class="st">&#39;Justus&#39;</span>){</span>
<span id="cb53-3"><a href="programmieren-in-r.html#cb53-3" aria-hidden="true" tabindex="-1"></a>    text <span class="ot">&lt;-</span> <span class="st">&#39;! How extraordinarily nice to see you! I hope you are doing well!&#39;</span></span>
<span id="cb53-4"><a href="programmieren-in-r.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb53-5"><a href="programmieren-in-r.html#cb53-5" aria-hidden="true" tabindex="-1"></a>    text <span class="ot">&lt;-</span> <span class="st">&#39;! Nice to see you!&#39;</span></span>
<span id="cb53-6"><a href="programmieren-in-r.html#cb53-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-7"><a href="programmieren-in-r.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">paste0</span>(<span class="st">&#39;Hello &#39;</span>,name,text))</span>
<span id="cb53-8"><a href="programmieren-in-r.html#cb53-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ein letzter Trick, um diese Funktion leichter lesbar zu gestalten, ist den Regelfall <em>vor</em> das <code>if</code>-statement zu stellen und sich so das <code>else</code> zu sparen. Da die Anweisung im <code>if</code>-statement nur evaluiert wird, wenn der Test positiv aufgeht, ist das Ergebnis der folgenden Funktion äquivalent:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="programmieren-in-r.html#cb54-1" aria-hidden="true" tabindex="-1"></a>greet_someone <span class="ot">&lt;-</span> <span class="cf">function</span>(name){</span>
<span id="cb54-2"><a href="programmieren-in-r.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">&lt;-</span> <span class="st">&#39;! Nice to see you!&#39;</span></span>
<span id="cb54-3"><a href="programmieren-in-r.html#cb54-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-4"><a href="programmieren-in-r.html#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(name <span class="sc">==</span> <span class="st">&#39;Justus&#39;</span>){</span>
<span id="cb54-5"><a href="programmieren-in-r.html#cb54-5" aria-hidden="true" tabindex="-1"></a>    text <span class="ot">&lt;-</span> <span class="st">&#39;! How extraordinarily nice to see you! I hope you are doing well!&#39;</span></span>
<span id="cb54-6"><a href="programmieren-in-r.html#cb54-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb54-7"><a href="programmieren-in-r.html#cb54-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-8"><a href="programmieren-in-r.html#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">paste0</span>(<span class="st">&#39;Hello &#39;</span>,name,text))</span>
<span id="cb54-9"><a href="programmieren-in-r.html#cb54-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="aufgabe-2" class="section level3">
<h3>Aufgabe</h3>
<ol style="list-style-type: decimal">
<li>Erweitere die <code>my_var</code>-Funktion um ein optionales <code>corrected</code> Argument, das standardmäßig auf <code>TRUE</code> gesetzt ist. Die Funktion soll, wenn dieses Argument auf <code>TRUE</code> gesetzt ist, die korrigierte(<span class="math inline">\(s^2 = {1\over{n-1}} \sum_{i=1}^n(x_i -M_X)^2\)</span>); wenn es auf <code>FALSE</code> gesetzt wird die unkorrigierte (<span class="math inline">\(S^2 = {1\over{n}} \sum_{i=1}^n(x_i -M_X)^2\)</span>) Stichprobenvarianz ausgeben.</li>
</ol>
<details>
<summary>
Antworten
</summary>
<p><strong>1.</strong></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="programmieren-in-r.html#cb55-1" aria-hidden="true" tabindex="-1"></a>my_var <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">corrected=</span><span class="cn">TRUE</span>){</span>
<span id="cb55-2"><a href="programmieren-in-r.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  m_x <span class="ot">&lt;-</span> <span class="fu">my_mean</span>(x)</span>
<span id="cb55-3"><a href="programmieren-in-r.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-4"><a href="programmieren-in-r.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> (x <span class="sc">-</span> m_x)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb55-5"><a href="programmieren-in-r.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-6"><a href="programmieren-in-r.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  factor <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> (<span class="fu">length</span>(x) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb55-7"><a href="programmieren-in-r.html#cb55-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-8"><a href="programmieren-in-r.html#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span>corrected){</span>
<span id="cb55-9"><a href="programmieren-in-r.html#cb55-9" aria-hidden="true" tabindex="-1"></a>    factor <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> (<span class="fu">length</span>(x))</span>
<span id="cb55-10"><a href="programmieren-in-r.html#cb55-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-11"><a href="programmieren-in-r.html#cb55-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-12"><a href="programmieren-in-r.html#cb55-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(factor <span class="sc">*</span> <span class="fu">sum</span>(x))</span>
<span id="cb55-13"><a href="programmieren-in-r.html#cb55-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</details>
</div>
</div>
<div id="zufallswerte" class="section level2">
<h2>Zufallswerte</h2>
<p>Mit R kann man sehr einfach quasi-zufällige<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Wertreihen erstellen. Aus der Veranstaltung letztes Semester kennen wir ja schon die Funktion <code>sample</code>, die aus einer vorgegebenen Urne ziehen kann.</p>
<p>Für unsere Simulations-Probleme gibt es noch eine andere Reihe an Funktionen, die für eine feste Verteilungsklasse zufällige Wertfolgen erstellen können.</p>
<p>Diese Funktionen werden mit einem <code>r</code> für <em>random</em> und der Verteilungsklasse aufgerufen. Eine Übersicht der implementierten Verteilungen kann man mit <code>?Distributions</code> aufrufen.</p>
<p>Mit diesen Funktionen können wir uns zum Beispiel jeweils 1000 zufällige Werte aus einer <span class="math inline">\(N(0,5)-\)</span>, einer <span class="math inline">\(B(20000, 1/6)-\)</span>, einer <span class="math inline">\(t(50)\)</span>- und einer <span class="math inline">\(F(12,36)-\)</span>Verteilung ziehen und in Histogrammen darstellen:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="programmieren-in-r.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb56-2"><a href="programmieren-in-r.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb56-3"><a href="programmieren-in-r.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">norm =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>,<span class="at">mean =</span> <span class="dv">0</span>,<span class="at">sd =</span> <span class="fu">sqrt</span>(<span class="dv">5</span>)),</span>
<span id="cb56-4"><a href="programmieren-in-r.html#cb56-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">binom =</span> <span class="fu">rbinom</span>(<span class="dv">1000</span>, <span class="at">size =</span> <span class="dv">20000</span>,<span class="at">prob =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>),</span>
<span id="cb56-5"><a href="programmieren-in-r.html#cb56-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">t =</span> <span class="fu">rt</span>(<span class="dv">1000</span>,<span class="at">df =</span> <span class="dv">50</span>),</span>
<span id="cb56-6"><a href="programmieren-in-r.html#cb56-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">f =</span> <span class="fu">rf</span>(<span class="dv">1000</span>,<span class="at">df1 =</span> <span class="dv">12</span>,<span class="at">df2 =</span> <span class="dv">36</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-7"><a href="programmieren-in-r.html#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(),</span>
<span id="cb56-8"><a href="programmieren-in-r.html#cb56-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;dist&#39;</span>,</span>
<span id="cb56-9"><a href="programmieren-in-r.html#cb56-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;sample&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-10"><a href="programmieren-in-r.html#cb56-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sample)) <span class="sc">+</span></span>
<span id="cb56-11"><a href="programmieren-in-r.html#cb56-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb56-12"><a href="programmieren-in-r.html#cb56-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&#39;black&#39;</span>,</span>
<span id="cb56-13"><a href="programmieren-in-r.html#cb56-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">40</span>) <span class="sc">+</span></span>
<span id="cb56-14"><a href="programmieren-in-r.html#cb56-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>dist,<span class="at">scales =</span> <span class="st">&#39;free_x&#39;</span>)</span></code></pre></div>
<p><img src="Robustheit_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<div id="aufgabe-3" class="section level3">
<h3>Aufgabe</h3>
<p>Erstelle eine Funktion <code>gen_distributed_values</code>, die mit Hilfe von <code>if</code>-Statements anhand eines Arguments <code>distribution</code> und eines Arguments <code>n</code> einen Vektor an Zufallszahlen generiert. Dabei soll <code>distribution</code> angeben, welche aus drei möglichen Verteilungen genutzt wird. Denke außerdem an mögliche Verteilungseigenschaften der genutzten Funktionen und füge sie als optionale Argumente zur Funktion hinzu.</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="programmieren-in-r.html#cb57-1" aria-hidden="true" tabindex="-1"></a>gen_distributed_values <span class="ot">&lt;-</span> <span class="cf">function</span>(distribution,</span>
<span id="cb57-2"><a href="programmieren-in-r.html#cb57-2" aria-hidden="true" tabindex="-1"></a>                                   n,</span>
<span id="cb57-3"><a href="programmieren-in-r.html#cb57-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">df =</span> <span class="dv">1</span>,</span>
<span id="cb57-4"><a href="programmieren-in-r.html#cb57-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">lambda =</span> <span class="dv">25</span>,</span>
<span id="cb57-5"><a href="programmieren-in-r.html#cb57-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">rate =</span> <span class="dv">5</span>) {</span>
<span id="cb57-6"><a href="programmieren-in-r.html#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(distribution <span class="sc">==</span> <span class="st">&#39;t&#39;</span>){</span>
<span id="cb57-7"><a href="programmieren-in-r.html#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">rt</span>(n, df))</span>
<span id="cb57-8"><a href="programmieren-in-r.html#cb57-8" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span>(distribution <span class="sc">==</span> <span class="st">&#39;pois&#39;</span>){</span>
<span id="cb57-9"><a href="programmieren-in-r.html#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">rpois</span>(n, lambda))</span>
<span id="cb57-10"><a href="programmieren-in-r.html#cb57-10" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span>(distribution <span class="sc">==</span> <span class="st">&#39;exp&#39;</span>){</span>
<span id="cb57-11"><a href="programmieren-in-r.html#cb57-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">rexp</span>(n, rate))</span>
<span id="cb57-12"><a href="programmieren-in-r.html#cb57-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-13"><a href="programmieren-in-r.html#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&#39;Distribution is not implemented, returning zeros&#39;</span>)</span>
<span id="cb57-14"><a href="programmieren-in-r.html#cb57-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">numeric</span>(n))</span>
<span id="cb57-15"><a href="programmieren-in-r.html#cb57-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb57-16"><a href="programmieren-in-r.html#cb57-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-17"><a href="programmieren-in-r.html#cb57-17" aria-hidden="true" tabindex="-1"></a><span class="fu">gen_distributed_values</span>(<span class="st">&#39;pois&#39;</span>,</span>
<span id="cb57-18"><a href="programmieren-in-r.html#cb57-18" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">5</span>,</span>
<span id="cb57-19"><a href="programmieren-in-r.html#cb57-19" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lambda =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 4 4 3 5 2</code></pre>
</details>
</div>
</div>
<div id="schleifen" class="section level2">
<h2>Schleifen</h2>
<p>Bei so gut wie allen Simulationsproblemen stehen wir vor der Situation, dass wir eine Operation, zum Beispiel das Generieren einer gewissen Zahl an Zufallswerten und die Berechnung der zugehörigen Teststatistik, mehrere hundert Mal ausführen wollen.</p>
<p>Wir könnten jetzt die Operation mehrere hundert mal in unser Skript schreiben, damit würden wir aber zum Einen Fehler einladen, zum Anderen viel zu viel Lebenszeit verschwenden.</p>
<p>Deswegen gibt es in so gut wie jeder Programmiersprache irgendeine Form von Ausdrücken, die eine <em>iterative</em> Wiederholung eines Ausdrucks ermöglichen.</p>
<p>Ein Beispiel für die Anweisung einer solchen iterativen Wiederholung sind Schleifen.
In R gibt es davon drei Arten:</p>
<ul>
<li><p><code>repeat</code> - die flexibelste Schleife, die so lange wiederholt bis sie mit <code>break</code> unterbrochen wird</p></li>
<li><p><code>while</code> - eine Schleife, die zu Beginn jeder Wiederholung einen logischen Test durchführt und bei Zutreffen die Operation wiederholt</p></li>
<li><p><code>for</code> - die unflexibelste der drei Möglichkeiten. <code>for</code> iteriert einen Wert durch einen Vektor oder eine Liste, bis alle Einträge einmal dran waren. Das heißt, dass wir eine feste Laufzeit und damit den einfachsten Umgang haben, weswegen wir auch <code>for</code> in diesem Kurs verwenden werden.</p></li>
</ul>
<p>Die <code>for</code>-Syntax sieht dabei wie folgt aus:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="programmieren-in-r.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(value <span class="cf">in</span> vector){</span>
<span id="cb59-2"><a href="programmieren-in-r.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  do something</span>
<span id="cb59-3"><a href="programmieren-in-r.html#cb59-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Um jetzt Beispielsweise alle Werte von eins bis zehn durch zu laufen und jeden Wert auszugeben können wir den folgenden Ausdruck benutzen:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="programmieren-in-r.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="dv">10</span>)){</span>
<span id="cb60-2"><a href="programmieren-in-r.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb60-3"><a href="programmieren-in-r.html#cb60-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Wie man an diesem Beispiel schon sehen kann, können wir in der Schleife auf den <code>i</code>-Wert zugreifen. Das können wir zum Beispiel benutzen, um die ersten zehn Zahlen der Fibonacci-Reihe zu berechnen, in der jeder Wert die Summe der zwei vorhergegangenen ist:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="programmieren-in-r.html#cb62-1" aria-hidden="true" tabindex="-1"></a>fib <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">10</span>)</span>
<span id="cb62-2"><a href="programmieren-in-r.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(fib)){</span>
<span id="cb62-3"><a href="programmieren-in-r.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i<span class="sc">&lt;</span><span class="dv">3</span>){ <span class="co"># die ersten zwei Stellen müssen Einsen sein</span></span>
<span id="cb62-4"><a href="programmieren-in-r.html#cb62-4" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb62-5"><a href="programmieren-in-r.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb62-6"><a href="programmieren-in-r.html#cb62-6" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>] <span class="co"># nimm die letzten zwei Einträge und summier sie auf</span></span>
<span id="cb62-7"><a href="programmieren-in-r.html#cb62-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-8"><a href="programmieren-in-r.html#cb62-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-9"><a href="programmieren-in-r.html#cb62-9" aria-hidden="true" tabindex="-1"></a>fib</span></code></pre></div>
<pre><code>##  [1]  1  1  2  3  5  8 13 21 34 55</code></pre>
<p>In diesem Beispiel ist noch ein weiteres Programmier-Prinzip sichtbar, die <em>Allokation</em> des Ergebnis-Vektors vor der Berechnung der Werte. Damit ist einfach gemeint, dass wir den leeren <code>fib</code>-Vektor erstellt haben, bevor wir mit der Schleife angefangen haben.</p>
<p>Der Grund für dieses Vorgehen ist, dass jedes Anlegen eines Vektors einer bestimtmen Größe ein bisschen Rechenzeit kostet. Wenn wir von vornherein festlegen, wie lang der Vektor werden soll, müssen wir nur einen Vektor anlegen. Wenn wir stattdessen wie im folgenden Beispiel in jeder Iteration den Vektor vergrößern, erstellt R implizit in jeder Iteration einen neuen Vektor.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="programmieren-in-r.html#cb64-1" aria-hidden="true" tabindex="-1"></a>fib <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb64-2"><a href="programmieren-in-r.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="dv">10</span>)){</span>
<span id="cb64-3"><a href="programmieren-in-r.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i<span class="sc">&lt;</span><span class="dv">3</span>){ </span>
<span id="cb64-4"><a href="programmieren-in-r.html#cb64-4" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb64-5"><a href="programmieren-in-r.html#cb64-5" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb64-6"><a href="programmieren-in-r.html#cb64-6" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>] </span>
<span id="cb64-7"><a href="programmieren-in-r.html#cb64-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb64-8"><a href="programmieren-in-r.html#cb64-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-9"><a href="programmieren-in-r.html#cb64-9" aria-hidden="true" tabindex="-1"></a>fib</span></code></pre></div>
<pre><code>##  [1]  1  1  2  3  5  8 13 21 34 55</code></pre>
<p>Bei 10 Stellen ist der Unterschied noch nicht wirklich bemerkbar. Wenn wir jetzt aber das ganze in Funktionen verpacken und für längere Sequenzen laufen lassen und die Laufzeit stoppen sehen wir den Unterschied:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="programmieren-in-r.html#cb66-1" aria-hidden="true" tabindex="-1"></a>fib_alloc <span class="ot">&lt;-</span> <span class="cf">function</span>(n){</span>
<span id="cb66-2"><a href="programmieren-in-r.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  fib <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)</span>
<span id="cb66-3"><a href="programmieren-in-r.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(fib)){</span>
<span id="cb66-4"><a href="programmieren-in-r.html#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(i<span class="sc">&lt;</span><span class="dv">3</span>){ </span>
<span id="cb66-5"><a href="programmieren-in-r.html#cb66-5" aria-hidden="true" tabindex="-1"></a>      fib[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb66-6"><a href="programmieren-in-r.html#cb66-6" aria-hidden="true" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb66-7"><a href="programmieren-in-r.html#cb66-7" aria-hidden="true" tabindex="-1"></a>      fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>] </span>
<span id="cb66-8"><a href="programmieren-in-r.html#cb66-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb66-9"><a href="programmieren-in-r.html#cb66-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb66-10"><a href="programmieren-in-r.html#cb66-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(fib)</span>
<span id="cb66-11"><a href="programmieren-in-r.html#cb66-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb66-12"><a href="programmieren-in-r.html#cb66-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-13"><a href="programmieren-in-r.html#cb66-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-14"><a href="programmieren-in-r.html#cb66-14" aria-hidden="true" tabindex="-1"></a>fib_no_alloc <span class="ot">&lt;-</span> <span class="cf">function</span>(n){</span>
<span id="cb66-15"><a href="programmieren-in-r.html#cb66-15" aria-hidden="true" tabindex="-1"></a>  fib <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb66-16"><a href="programmieren-in-r.html#cb66-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(n)){</span>
<span id="cb66-17"><a href="programmieren-in-r.html#cb66-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(i<span class="sc">&lt;</span><span class="dv">3</span>){ </span>
<span id="cb66-18"><a href="programmieren-in-r.html#cb66-18" aria-hidden="true" tabindex="-1"></a>      fib[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb66-19"><a href="programmieren-in-r.html#cb66-19" aria-hidden="true" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb66-20"><a href="programmieren-in-r.html#cb66-20" aria-hidden="true" tabindex="-1"></a>      fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>] </span>
<span id="cb66-21"><a href="programmieren-in-r.html#cb66-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb66-22"><a href="programmieren-in-r.html#cb66-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb66-23"><a href="programmieren-in-r.html#cb66-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(fib)</span>
<span id="cb66-24"><a href="programmieren-in-r.html#cb66-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb66-25"><a href="programmieren-in-r.html#cb66-25" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb66-26"><a href="programmieren-in-r.html#cb66-26" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">fib_alloc</span>(<span class="dv">100000</span>)</span>
<span id="cb66-27"><a href="programmieren-in-r.html#cb66-27" aria-hidden="true" tabindex="-1"></a>runtime_alloc <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>() <span class="sc">-</span> start</span>
<span id="cb66-28"><a href="programmieren-in-r.html#cb66-28" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb66-29"><a href="programmieren-in-r.html#cb66-29" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">fib_no_alloc</span>(<span class="dv">100000</span>)</span>
<span id="cb66-30"><a href="programmieren-in-r.html#cb66-30" aria-hidden="true" tabindex="-1"></a>runtime_no_alloc <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>() <span class="sc">-</span> start</span>
<span id="cb66-31"><a href="programmieren-in-r.html#cb66-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-32"><a href="programmieren-in-r.html#cb66-32" aria-hidden="true" tabindex="-1"></a>runtime_alloc</span></code></pre></div>
<pre><code>## Time difference of 0.03651381 secs</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="programmieren-in-r.html#cb68-1" aria-hidden="true" tabindex="-1"></a>runtime_no_alloc</span></code></pre></div>
<pre><code>## Time difference of 0.08606291 secs</code></pre>
<p>Mehr als die Hälfte der Zeit geht für das Erstellen des neuen Vektors drauf!</p>
<div id="aufgabe-4" class="section level3">
<h3>Aufgabe</h3>
<p>In QM-2 habt Ihr im Rahmen des zentralen Grenzwertsatzes gelernt, dass die Verteilungsfunktion der z-Transformation der n-ten Summe einer Reihe von unabhängigen Zufallsvariablen für wachsendes n schwach gegen die Standardnormalverteilung konvergiert.</p>
<p>Schreibe eine Funktion, die für eine gegebene Anzahl an Summen und eine gegebene Verteilungsklasse (und den entsprechenden Parametern inklusive der Stichprobengröße) einen Vektor mit den entsprechenden Summen zurückgibt.
Nutze dafür deine Funktion aus der letzten Aufgabe.</p>
<p>Nutze diese Funktion dann um ein Histogramm mit 5000 dieser z-transformierten Summen zu erstellen.</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="programmieren-in-r.html#cb70-1" aria-hidden="true" tabindex="-1"></a>gen_central_lim_vec <span class="ot">&lt;-</span> <span class="cf">function</span>(N, </span>
<span id="cb70-2"><a href="programmieren-in-r.html#cb70-2" aria-hidden="true" tabindex="-1"></a>                                distribution,</span>
<span id="cb70-3"><a href="programmieren-in-r.html#cb70-3" aria-hidden="true" tabindex="-1"></a>                                n,</span>
<span id="cb70-4"><a href="programmieren-in-r.html#cb70-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">df =</span> <span class="dv">1</span>,</span>
<span id="cb70-5"><a href="programmieren-in-r.html#cb70-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">lambda =</span> <span class="dv">25</span>,</span>
<span id="cb70-6"><a href="programmieren-in-r.html#cb70-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">rate =</span> <span class="dv">5</span>) {</span>
<span id="cb70-7"><a href="programmieren-in-r.html#cb70-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-8"><a href="programmieren-in-r.html#cb70-8" aria-hidden="true" tabindex="-1"></a>  ret_vec <span class="ot">&lt;-</span> <span class="fu">numeric</span>(N)</span>
<span id="cb70-9"><a href="programmieren-in-r.html#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(N)){</span>
<span id="cb70-10"><a href="programmieren-in-r.html#cb70-10" aria-hidden="true" tabindex="-1"></a>    ret_vec[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">gen_distributed_values</span>(distribution,</span>
<span id="cb70-11"><a href="programmieren-in-r.html#cb70-11" aria-hidden="true" tabindex="-1"></a>                                      n,</span>
<span id="cb70-12"><a href="programmieren-in-r.html#cb70-12" aria-hidden="true" tabindex="-1"></a>                                      df,</span>
<span id="cb70-13"><a href="programmieren-in-r.html#cb70-13" aria-hidden="true" tabindex="-1"></a>                                      lambda,</span>
<span id="cb70-14"><a href="programmieren-in-r.html#cb70-14" aria-hidden="true" tabindex="-1"></a>                                      rate))</span>
<span id="cb70-15"><a href="programmieren-in-r.html#cb70-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb70-16"><a href="programmieren-in-r.html#cb70-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ret_vec)</span>
<span id="cb70-17"><a href="programmieren-in-r.html#cb70-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-18"><a href="programmieren-in-r.html#cb70-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-19"><a href="programmieren-in-r.html#cb70-19" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">sample =</span> <span class="fu">scale</span>(<span class="fu">gen_central_lim_vec</span>(<span class="dv">5000</span>, <span class="st">&#39;exp&#39;</span>, <span class="dv">1000</span>,<span class="at">rate =</span> <span class="dv">5</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb70-20"><a href="programmieren-in-r.html#cb70-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sample)) <span class="sc">+</span></span>
<span id="cb70-21"><a href="programmieren-in-r.html#cb70-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">1</span>,</span>
<span id="cb70-22"><a href="programmieren-in-r.html#cb70-22" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>,</span>
<span id="cb70-23"><a href="programmieren-in-r.html#cb70-23" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&#39;white&#39;</span>)</span></code></pre></div>
<img src="Robustheit_files/figure-html/unnamed-chunk-38-1.png" width="672" />
</details>
</div>
</div>
<div id="listen" class="section level2">
<h2>Listen</h2>
<p>Listen sind uns aus der R-Übung schon im Rahmen der <a href="https://mbrede.github.io/CAU_Kiel_EDVI/aggregation-und-filemanagement.html#lazy-evaluation">Gruppenweisen Aggregation mit <code>across</code></a> und <a href="https://mbrede.github.io/CAU_KIEL_EDVII/einfache-lineare-zusammenh%C3%A4nge.html#weitere-parameter">als Output von Inferenzstatistischen Funktionen</a> untergekommen.
Aber was genau Listen architektonisch sind, haben wir bisher übergangen.</p>
<p>Listen sind in R ziemlich ähnlich zu Vektoren <a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. Sie bilden Aneinander-Kettungen von Objekten ab, bei denen wir die einzelnen Elemente benennen können.
Ein Unterschied zu Vektoren ist aber, dass die Objekte nicht von einem einzelnen Typ sein müssen.
Ein anderer Unterschied wird deutlich, wenn wir uns den Output von benannten Vektoren und Listen genauer anschauen.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="programmieren-in-r.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&#39;a&#39;</span><span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb71-2"><a href="programmieren-in-r.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;b&#39;</span><span class="ot">=</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## a b 
## 1 2</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="programmieren-in-r.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(<span class="st">&#39;a&#39;</span><span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb73-2"><a href="programmieren-in-r.html#cb73-2" aria-hidden="true" tabindex="-1"></a>     <span class="st">&#39;b&#39;</span><span class="ot">=</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## $a
## [1] 1
## 
## $b
## [1] 2</code></pre>
<p>Die Ausgabe der Liste ähnelt unter der jeweiligen Überschrift (z.B.: <code>$a</code>) dem Output, den wir bei einem unbenannten Vektor sehen:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="programmieren-in-r.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Das liegt daran, dass in einer Liste unter dem Namen auch der ganze Vektor “abgespeichert” ist. Abgespeichert ist hier in Anführungszeichen, da in der Liste eigentlich nur ein Verweis auf einen Vektor liegt. Das kann man sich verdeutlichen, wenn man sich die Größen von Vektoren und Listen im Arbeitsspeicher anguckt.</p>
<p>Dazu erstellen wir einen Vektoren mit den Zahlen von 1:1000 und eine Liste, der wir dreimal diesen Vektor übergeben.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="programmieren-in-r.html#cb77-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>)</span>
<span id="cb77-2"><a href="programmieren-in-r.html#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="programmieren-in-r.html#cb77-3" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> a, <span class="at">b =</span> a, <span class="at">c =</span> a, <span class="at">d =</span> a)</span></code></pre></div>
<p>Wenn wir uns jetzt die Größen der beiden Objekte angucken, sehen wir dass die Liste kleiner ist, als vielleicht zuerst erwartet:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="programmieren-in-r.html#cb78-1" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(a)</span></code></pre></div>
<pre><code>## 4,048 B</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="programmieren-in-r.html#cb80-1" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(b)</span></code></pre></div>
<pre><code>## 4,544 B</code></pre>
<p>Wenn wir die Liste mit einem vergleichbaren Vektor gegenüberstellen sehen wir, dass dieser die Werte offensichtlich direkt ablegt, wohingegen die Liste die Werte nur einmal beinhaltet (plus ein bisschen Speicher für die wiederholten Verweise und Namen):</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="programmieren-in-r.html#cb82-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">c</span>(a, a, a, a)</span>
<span id="cb82-2"><a href="programmieren-in-r.html#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="programmieren-in-r.html#cb82-3" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(a)</span></code></pre></div>
<pre><code>## 4,048 B</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="programmieren-in-r.html#cb84-1" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(b)</span></code></pre></div>
<pre><code>## 4,544 B</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="programmieren-in-r.html#cb86-1" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(d)</span></code></pre></div>
<pre><code>## 16,048 B</code></pre>
<p>Was passiert nun, wenn wir einen Teil eines der vier Einträge in der Liste ändern?</p>
<p>Dazu können wir die schon von <code>data.frames</code> bekannte Index-Variante mit dem <code>$</code>-Operator nutzen um einen der Vektoren in der Liste zu modifizieren:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="programmieren-in-r.html#cb88-1" aria-hidden="true" tabindex="-1"></a>b<span class="sc">$</span>a[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb88-2"><a href="programmieren-in-r.html#cb88-2" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(b)</span></code></pre></div>
<pre><code>## 12,592 B</code></pre>
<p>Die Liste wird größer. Dass sie nicht in Inkrementen von 4000 B größer wird, liegt daran, dass die Zahlen in <code>a</code> als Sequenz von R effizienter gespeichert werden können, als als einfache Zahlen. Wenn wir uns <code>a</code> alleine angucken und die Größe vor und nach Änderung der ersten Stelle betrachten, wird das deutlich:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="programmieren-in-r.html#cb90-1" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(a)</span></code></pre></div>
<pre><code>## 4,048 B</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="programmieren-in-r.html#cb92-1" aria-hidden="true" tabindex="-1"></a>a[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb92-2"><a href="programmieren-in-r.html#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="programmieren-in-r.html#cb92-3" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(a)</span></code></pre></div>
<pre><code>## 8,048 B</code></pre>
<p>Für mehr Details zu diesem Speicher-Verhalten und dem zugrunde liegenden Prinzip ist das kostenlos <a href="https://adv-r.hadley.nz/index.html">hier zugängliche</a> Buch “Advanced R” <span class="citation">Wickham (<a href="#ref-wickhamAdvanced2019" role="doc-biblioref">2019</a>)</span> sehr gut, vor allem die <a href="https://adv-r.hadley.nz/names-values.html#binding-basics">Kapitel 2.2</a> und folgende und das <a href="https://adv-r.hadley.nz/vectors-chap.html">Kapitel über Vektoren</a>.</p>
<div id="aufgabe-5" class="section level4">
<h4>Aufgabe</h4>
<p>Überlege dir, wie sich der Speicherbedarf der Liste <code>b</code> ändert, wenn Du den zweiten Platz der Liste mit dem ersten Platz der Liste überschreibst.
Probiere dann aus, ob sich deine Vorhersage bewahrheitet.
Überprüfe dann, was passiert, wenn du die erste Stelle des dritten Platzes der Liste durch fünf ersetzt.
Was könnte hier passiert sein?</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="programmieren-in-r.html#cb94-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>)</span>
<span id="cb94-2"><a href="programmieren-in-r.html#cb94-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> a,<span class="at">b =</span> a,<span class="at">c =</span> a,<span class="at">d =</span> a)</span>
<span id="cb94-3"><a href="programmieren-in-r.html#cb94-3" aria-hidden="true" tabindex="-1"></a>b<span class="sc">$</span>a[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb94-4"><a href="programmieren-in-r.html#cb94-4" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(b)</span></code></pre></div>
<pre><code>## 12,592 B</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="programmieren-in-r.html#cb96-1" aria-hidden="true" tabindex="-1"></a>b<span class="sc">$</span>b <span class="ot">&lt;-</span> b<span class="sc">$</span>a</span>
<span id="cb96-2"><a href="programmieren-in-r.html#cb96-2" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(b)</span></code></pre></div>
<pre><code>## 12,592 B</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="programmieren-in-r.html#cb98-1" aria-hidden="true" tabindex="-1"></a>b<span class="sc">$</span>c[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb98-2"><a href="programmieren-in-r.html#cb98-2" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_size</span>(b)</span></code></pre></div>
<pre><code>## 20,640 B</code></pre>
</details>
</div>
<div id="listen-und-datensätze" class="section level3">
<h3>Listen und Datensätze</h3>
<p>Das Arbeiten mit Listen ist ziemlich ähnlich zu der mit Datensätzen.
Das liegt ganz einfach daran, dass Datensätze auch Listen sind, der einzige wirklich wichtige Unterschied ist, dass Datensätze im Vergleich zu Listen einheitliche Längen von den eingefügten Vektoren erwarten.</p>
<p>Zu sehen ist dieses Verhältnis ganz einfach, wenn man sich den <code>mode</code> eines Datensatzes anguckt:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="programmieren-in-r.html#cb100-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb100-2"><a href="programmieren-in-r.html#cb100-2" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb100-3"><a href="programmieren-in-r.html#cb100-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-4"><a href="programmieren-in-r.html#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(a)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="programmieren-in-r.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(a)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>Der Unterschied ist in den <code>attributes</code> des Datensatzes festgelegt.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="programmieren-in-r.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a)</span></code></pre></div>
<pre><code>## $names
## [1] &quot;X1.10&quot;   &quot;X1.10.1&quot;
## 
## $class
## [1] &quot;data.frame&quot;
## 
## $row.names
##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>Nur zum Spaß können wir so auch versuchen, umständlich einen Datensatz zu erstellen:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="programmieren-in-r.html#cb106-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb106-2"><a href="programmieren-in-r.html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="programmieren-in-r.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">names =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],</span>
<span id="cb108-2"><a href="programmieren-in-r.html#cb108-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">row.names =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb108-3"><a href="programmieren-in-r.html#cb108-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">class =</span> <span class="st">&quot;data.frame&quot;</span>)</span>
<span id="cb108-4"><a href="programmieren-in-r.html#cb108-4" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>##     a  b
## 1   1  1
## 2   2  2
## 3   3  3
## 4   4  4
## 5   5  5
## 6   6  6
## 7   7  7
## 8   8  8
## 9   9  9
## 10 10 10</code></pre>
<div id="aufgabe-6" class="section level4">
<h4>Aufgabe</h4>
<p>Überlege Dir, was wohl passiert, wenn du auf die gerade demonstrierte Art und Weise einen Datensatz erstellst, bei dem die eingefügten Vektoren von unterschiedlicher Länge sind.
Überprüfe dann, ob die Erwartungen stimmen.</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="programmieren-in-r.html#cb110-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">21</span><span class="sc">:</span><span class="dv">30</span>,<span class="dv">41</span><span class="sc">:</span><span class="dv">45</span>)</span>
<span id="cb110-2"><a href="programmieren-in-r.html#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="programmieren-in-r.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">names =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],</span>
<span id="cb112-2"><a href="programmieren-in-r.html#cb112-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">row.names =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb112-3"><a href="programmieren-in-r.html#cb112-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">class =</span> <span class="st">&quot;data.frame&quot;</span>)</span>
<span id="cb112-4"><a href="programmieren-in-r.html#cb112-4" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## Warning in format.data.frame(if (omit) x[seq_len(n0), , drop = FALSE] else x, :
## corrupt data frame: columns will be truncated or padded with NAs</code></pre>
<pre><code>##     a  b    c
## 1   1 21   41
## 2   2 22   42
## 3   3 23   43
## 4   4 24   44
## 5   5 25   45
## 6   6 26 &lt;NA&gt;
## 7   7 27 &lt;NA&gt;
## 8   8 28 &lt;NA&gt;
## 9   9 29 &lt;NA&gt;
## 10 10 30 &lt;NA&gt;</code></pre>
</details>
</div>
</div>
<div id="arbeiten-mit-listen" class="section level3">
<h3>Arbeiten mit Listen</h3>
<p>Da Datensätze eigentlich nur Listen sind, gibt es Listen-Operationen die wir schon von Datensätzen kennen, bei denen wir einfach noch nicht wussten, dass sie eigentlich aus dem Listen-Kontext stammen.</p>
<p>Insbesondere sind die Operationen, die wir auch schon hier im Skript genutzt haben, Listen-Operationen, die wir aus dem <code>data.frame</code>-Kontext kennen.
Da wären das Anlegen von Spalten/Listen-Einträgen mit Namen, wie wir es eben gesehen haben:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="programmieren-in-r.html#cb115-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb115-2"><a href="programmieren-in-r.html#cb115-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<p>Und das Indizieren mit dem <code>$</code>-Operator:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="programmieren-in-r.html#cb116-1" aria-hidden="true" tabindex="-1"></a>a<span class="sc">$</span>a</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="programmieren-in-r.html#cb118-1" aria-hidden="true" tabindex="-1"></a>b<span class="sc">$</span>a</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>Als kleinen Zusatz können wir uns noch die numerische Indizierung angucken, die bei Listen und damit auch Datensätzen mit doppelten eckigen Klammern funktioniert (<code>[[]]</code>). Dieser Index-Operator ist hilfreich, wenn nicht jedes mal für jeden Eintrag ein Name angelegt werden soll. Das kann zum Beispiel sinnvoll bei <code>functional</code>-Iteratoren sein, bei denen man nur eine schnelle Stapelverarbeitung plant, dazu aber später mehr.</p>
<p>Bei Listen und Datensätzen sieht der <code>[[]]</code>-Einsatz dann so aus:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="programmieren-in-r.html#cb120-1" aria-hidden="true" tabindex="-1"></a>a[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="programmieren-in-r.html#cb122-1" aria-hidden="true" tabindex="-1"></a>b[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div id="aufgabe-7" class="section level4">
<h4>Aufgabe</h4>
<p>Baue ein Skript, das eine Liste erstellt, die drei Einträge enthält.
Jeder dieser Einträge soll auch wieder eine Liste sein.
Das Skript soll nun mit Hilfe einer Schleife die Zahlen von 1 bis 100 durchgehen und alle durch 2 teilbaren Zahlen in den zweiten Eintrag, alle durch 3 teilbaren Zahlen in den dritten Eintrag und alle restlichen Zahlen in den ersten Eintrag einfügen.
Nutze hierfür den “Modulo”-Operator <code>%%</code>, der den ‘Rest’ einer Ganzzahldivision ausgibt.
Überlege dir, wie du mit Zahlen wie der 6 umgehst, die sowohl durch 3 als auch durch 2 teilbar sind.
Kleiner Tipp: <code>length</code> kann hier sehr hilfreich sein.</p>
<p>Zusatzaufgabe:
Überlege dir, wie man dieses Skript so umbauen könnte, dass es für einen Vektor mit beliebigen Teilern funktioniert.</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="programmieren-in-r.html#cb124-1" aria-hidden="true" tabindex="-1"></a>divisions <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(), <span class="fu">list</span>(), <span class="fu">list</span>())</span>
<span id="cb124-2"><a href="programmieren-in-r.html#cb124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-3"><a href="programmieren-in-r.html#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>){</span>
<span id="cb124-4"><a href="programmieren-in-r.html#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i<span class="sc">%%</span><span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb124-5"><a href="programmieren-in-r.html#cb124-5" aria-hidden="true" tabindex="-1"></a>    divisions[[<span class="dv">2</span>]][[<span class="fu">length</span>(divisions[[<span class="dv">2</span>]]) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> i</span>
<span id="cb124-6"><a href="programmieren-in-r.html#cb124-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb124-7"><a href="programmieren-in-r.html#cb124-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i<span class="sc">%%</span><span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb124-8"><a href="programmieren-in-r.html#cb124-8" aria-hidden="true" tabindex="-1"></a>    divisions[[<span class="dv">3</span>]][[<span class="fu">length</span>(divisions[[<span class="dv">3</span>]]) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> i</span>
<span id="cb124-9"><a href="programmieren-in-r.html#cb124-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb124-10"><a href="programmieren-in-r.html#cb124-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i<span class="sc">%%</span><span class="dv">2</span> <span class="sc">!=</span> <span class="dv">0</span> <span class="sc">&amp;</span> i<span class="sc">%%</span><span class="dv">3</span> <span class="sc">!=</span> <span class="dv">0</span>){</span>
<span id="cb124-11"><a href="programmieren-in-r.html#cb124-11" aria-hidden="true" tabindex="-1"></a>    divisions[[<span class="dv">1</span>]][[<span class="fu">length</span>(divisions[[<span class="dv">1</span>]]) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> i</span>
<span id="cb124-12"><a href="programmieren-in-r.html#cb124-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb124-13"><a href="programmieren-in-r.html#cb124-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb124-14"><a href="programmieren-in-r.html#cb124-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(divisions)</span></code></pre></div>
<pre><code>##      Length Class  Mode
## [1,] 33     -none- list
## [2,] 50     -none- list
## [3,] 33     -none- list</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="programmieren-in-r.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Zusatz:</span></span>
<span id="cb126-2"><a href="programmieren-in-r.html#cb126-2" aria-hidden="true" tabindex="-1"></a>divisions <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>()) <span class="co"># mit einer leeren Liste für die nicht-teilbaren initiieren</span></span>
<span id="cb126-3"><a href="programmieren-in-r.html#cb126-3" aria-hidden="true" tabindex="-1"></a>divider <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>)</span>
<span id="cb126-4"><a href="programmieren-in-r.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> divider){</span>
<span id="cb126-5"><a href="programmieren-in-r.html#cb126-5" aria-hidden="true" tabindex="-1"></a>  divisions[[i]] <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb126-6"><a href="programmieren-in-r.html#cb126-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb126-7"><a href="programmieren-in-r.html#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>){</span>
<span id="cb126-8"><a href="programmieren-in-r.html#cb126-8" aria-hidden="true" tabindex="-1"></a>  divided <span class="ot">&lt;-</span>  F</span>
<span id="cb126-9"><a href="programmieren-in-r.html#cb126-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> divider){</span>
<span id="cb126-10"><a href="programmieren-in-r.html#cb126-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(i <span class="sc">%%</span> j <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb126-11"><a href="programmieren-in-r.html#cb126-11" aria-hidden="true" tabindex="-1"></a>      divisions[[j]][[<span class="fu">length</span>(divisions[[j]]) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> i</span>
<span id="cb126-12"><a href="programmieren-in-r.html#cb126-12" aria-hidden="true" tabindex="-1"></a>      divided <span class="ot">&lt;-</span> T</span>
<span id="cb126-13"><a href="programmieren-in-r.html#cb126-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb126-14"><a href="programmieren-in-r.html#cb126-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb126-15"><a href="programmieren-in-r.html#cb126-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span>divided){</span>
<span id="cb126-16"><a href="programmieren-in-r.html#cb126-16" aria-hidden="true" tabindex="-1"></a>    divisions[[<span class="dv">1</span>]][[<span class="fu">length</span>(divisions[[<span class="dv">1</span>]]) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> i</span>
<span id="cb126-17"><a href="programmieren-in-r.html#cb126-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb126-18"><a href="programmieren-in-r.html#cb126-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb126-19"><a href="programmieren-in-r.html#cb126-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-20"><a href="programmieren-in-r.html#cb126-20" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(divisions)</span></code></pre></div>
<pre><code>##       Length Class  Mode
##  [1,] 22     -none- list
##  [2,] 50     -none- list
##  [3,] 33     -none- list
##  [4,]  0     -none- NULL
##  [5,] 20     -none- list
##  [6,]  0     -none- NULL
##  [7,] 14     -none- list
##  [8,]  0     -none- NULL
##  [9,] 11     -none- list</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="programmieren-in-r.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(divisions[[<span class="dv">1</span>]]) <span class="co"># Mit Teilern und ohne 1 haben wir hier die Primzahlen bis 100 gesammelt.</span></span></code></pre></div>
<pre><code>##  [1]  1 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97</code></pre>
</details>
</div>
</div>
</div>
<div id="attribute" class="section level2">
<h2>Attribute</h2>
<p>Bei der sehr umständlichen Erstellung des Datensatzes haben wir schon die <code>attributes</code> kennen gelernt. Diese Informationen, die in R zu einem Objekt neben dem eigentlichen Inhalt angelegt werden können, sind ein wichtiger Teil der Abbildung objektorientierter Programmierparadigmen<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> in R.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="programmieren-in-r.html#cb130-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb130-2"><a href="programmieren-in-r.html#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="programmieren-in-r.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(a) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">names =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],</span>
<span id="cb132-2"><a href="programmieren-in-r.html#cb132-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">row.names =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb132-3"><a href="programmieren-in-r.html#cb132-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">class =</span> <span class="st">&quot;data.frame&quot;</span>)</span>
<span id="cb132-4"><a href="programmieren-in-r.html#cb132-4" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>##     a  b
## 1   1  1
## 2   2  2
## 3   3  3
## 4   4  4
## 5   5  5
## 6   6  6
## 7   7  7
## 8   8  8
## 9   9  9
## 10 10 10</code></pre>
<p>Neben der Klasse (<code>class</code>) haben wir hier in die <code>attributes</code> auch die Namen der Einträge und die Zeilennamen geschrieben. Wir sehen also, dass der sichtbare und bemerkbare Unterschied zwischen Listen und Datensätzen aus dem Setzen dieser Attribute entsteht. Außerdem wird an diesem Beispiel deutlich, dass die Funktionen, die wir bisher zum Erstellen von Datensätzen genutzt haben, auch eigentlich nur Attribute setzen.
Attribute sind also zusätzliche Informationen, die den Umgang mit Objekten ändern können.</p>
<p>Ein weiteres Beispiel für solche Änderungen durch Attribute sind Matritzen. In R kann man mit der <code>matrix</code>-Funktion zweidimensionale Daten-Raster erstellen, für die zum Beispiel auch die dimensionierte Indizierung <code>[,]</code> definiert ist:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="programmieren-in-r.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>,</span>
<span id="cb134-2"><a href="programmieren-in-r.html#cb134-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">nrow =</span> <span class="dv">10</span>, </span>
<span id="cb134-3"><a href="programmieren-in-r.html#cb134-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">ncol =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
##  [1,]    1   11   21   31   41   51   61   71   81    91
##  [2,]    2   12   22   32   42   52   62   72   82    92
##  [3,]    3   13   23   33   43   53   63   73   83    93
##  [4,]    4   14   24   34   44   54   64   74   84    94
##  [5,]    5   15   25   35   45   55   65   75   85    95
##  [6,]    6   16   26   36   46   56   66   76   86    96
##  [7,]    7   17   27   37   47   57   67   77   87    97
##  [8,]    8   18   28   38   48   58   68   78   88    98
##  [9,]    9   19   29   39   49   59   69   79   89    99
## [10,]   10   20   30   40   50   60   70   80   90   100</code></pre>
<div id="aufgabe-8" class="section level4">
<h4>Aufgabe</h4>
<p>Erstelle eine Matrix und gucke die genau die Attribute und Inhalte an.</p>
<p>Können wir so wie wir einen Datensatz aus einer Liste erstellt haben, irgendwie ohne die <code>matrix</code>-Funktion eine Matrix erstellen? Gucke Dir dabei nach jeder Änderung an, was <code>class</code> und <code>mode</code> zurückgeben.</p>
<p>Probiere außerdem aus, was passiert, wenn man die Attribute einer Matrix auf eine Liste überträgt.</p>
<p><strong>Zusatz:</strong></p>
<p>Was passiert, wenn wir der Liste drei Dimensionen geben?</p>
<details>
<summary>
Antwort
</summary>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="programmieren-in-r.html#cb136-1" aria-hidden="true" tabindex="-1"></a>my_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>],</span>
<span id="cb136-2"><a href="programmieren-in-r.html#cb136-2" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">4</span>)</span>
<span id="cb136-3"><a href="programmieren-in-r.html#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="programmieren-in-r.html#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(my_mat)</span></code></pre></div>
<pre><code>## $dim
## [1] 4 5</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="programmieren-in-r.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(my_mat)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="programmieren-in-r.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_mat)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="programmieren-in-r.html#cb142-1" aria-hidden="true" tabindex="-1"></a>my_list_mat <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">11</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">16</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb142-2"><a href="programmieren-in-r.html#cb142-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-3"><a href="programmieren-in-r.html#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(my_list_mat) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb142-4"><a href="programmieren-in-r.html#cb142-4" aria-hidden="true" tabindex="-1"></a>my_list_mat</span></code></pre></div>
<pre><code>##      [,1]      [,2]     
## [1,] integer,5 integer,5
## [2,] integer,5 integer,5</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="programmieren-in-r.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(my_list_mat)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="programmieren-in-r.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_list_mat)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="programmieren-in-r.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Zusatz</span></span>
<span id="cb148-2"><a href="programmieren-in-r.html#cb148-2" aria-hidden="true" tabindex="-1"></a>my_list_mat <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, </span>
<span id="cb148-3"><a href="programmieren-in-r.html#cb148-3" aria-hidden="true" tabindex="-1"></a>                    <span class="dv">3</span>, <span class="dv">4</span>, </span>
<span id="cb148-4"><a href="programmieren-in-r.html#cb148-4" aria-hidden="true" tabindex="-1"></a>                    <span class="dv">5</span>, <span class="dv">6</span>, </span>
<span id="cb148-5"><a href="programmieren-in-r.html#cb148-5" aria-hidden="true" tabindex="-1"></a>                    <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb148-6"><a href="programmieren-in-r.html#cb148-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-7"><a href="programmieren-in-r.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(my_list_mat) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>))</span>
<span id="cb148-8"><a href="programmieren-in-r.html#cb148-8" aria-hidden="true" tabindex="-1"></a>my_list_mat</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,] 1    3    5    7   
## [2,] 2    4    6    8</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="programmieren-in-r.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(my_list_mat)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="programmieren-in-r.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_list_mat)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="programmieren-in-r.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(my_list_mat) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb154-2"><a href="programmieren-in-r.html#cb154-2" aria-hidden="true" tabindex="-1"></a>my_list_mat</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,] 1    3   
## [2,] 2    4   
## 
## , , 2
## 
##      [,1] [,2]
## [1,] 5    7   
## [2,] 6    8</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="programmieren-in-r.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(my_list_mat)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="programmieren-in-r.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_list_mat)</span></code></pre></div>
<pre><code>## [1] &quot;array&quot;</code></pre>
<p>Mit anderen Worten ist eine Matrix als ein Array definiert, das (egal ob Liste oder Vektor), zwei Dimensionen hat. Mit mehr als zwei Dimensionen fällt die Matrix-Klasse weg.</p>
</details>
<p>Die Matrix-Listen aus der Aufgabe können wir übrigens auch wie Matrizen verwenden:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="programmieren-in-r.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(my_list_mat) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>))</span>
<span id="cb160-2"><a href="programmieren-in-r.html#cb160-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-3"><a href="programmieren-in-r.html#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(my_list_mat)</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,] 1    2   
## [2,] 3    4   
## [3,] 5    6   
## [4,] 7    8</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="programmieren-in-r.html#cb162-1" aria-hidden="true" tabindex="-1"></a>my_list_mat[<span class="dv">1</span>,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [[1]]
## [1] 3</code></pre>
<p>Das Ergebnis ist halt nur eine Liste, was mit dem bekannten doppel-Index aber auch umgangen werden kann:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="programmieren-in-r.html#cb164-1" aria-hidden="true" tabindex="-1"></a>my_list_mat[[<span class="dv">1</span>,<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
</div>
<div id="functionals" class="section level2">
<h2>Functionals</h2>

</div>
</div>
<h3>Literatur</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-wickhamAdvanced2019" class="csl-entry">
Wickham, Hadley. 2019. <em>Advanced r</em>. <span>CRC press</span>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Nicht, dass er uns verklagt.<a href="programmieren-in-r.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Es ist für einen Rechner sehr schwierig, wahren Zufall zu erzeugen. Auf der Hilfeseite <code>?Random</code> kann man sich eine Liste der Algorithmen anschauen, die R zur Generation quasi-zufälliger Wertfolgen nutzt. Diese nicht-wirklich-zufällige Natur der Wertfolgen hat aber auch den Vorteil, dass wir “zufällige” Ergebnisse reproduzierbar machen können. mit <code>set.seed()</code> können wir einen Startwert für die Zufalls-Generation festlegen, den andere R-Nutzer dann auch wählen können.<a href="programmieren-in-r.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>Wobei der Ausdruck “Vektoren” hier irreführend ist, in R wird eigentlich die Eltern-Klasse der Objekte <code>Vector</code> genannt, zu der <code>Atomic</code>(unsere “Vektoren”) und <code>List</code> gehören. Da wir aber in den Grundlagenfächern wegen der mathematischen Analogie “Vektor” zu den <code>Atomic</code>-Objekten gesagt haben, behalten wir das hier bei.<a href="programmieren-in-r.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>Was genau objektorientierte Programmierung ist, ist hier erstmal nicht so wichtig, im Prinzip sind aber alle Objekte mit <code>class</code>-Attribut nach objektorientierten Paradigmen erstellt. Hier wird das nur erwähnt, weil es die Geschichte von R als Nachfolger von S demonstriert, in dem ursprünglich “moderne” Paradigmen nicht Thema waren. Die Erweiterung der bestehenden Objekte durch das Setzen von Attributen ist die Lösung für dieses Problem, die in Rs <code>S3</code>-Objekten resultieren. Daneben gibt es in R die <code>S4</code>-Objekte, die formalisiertere Klassendefinitionen ermöglichen. Das führt aber alles ein bisschen weit für diese Veranstaltung, deswegen sei hier nochmal auf das sehr gute Buch von <span class="citation">Wickham (<a href="#ref-wickhamAdvanced2019" role="doc-biblioref">2019</a>)</span> verwiesen, in den Kapiteln 13-15 geht er auf OO-Programmierung in R ein.<a href="programmieren-in-r.html#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="literatur.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Robustheit.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
